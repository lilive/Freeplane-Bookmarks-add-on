<map version="freeplane 1.7.0">
<!--To view this file, download free mind mapping software Freeplane from http://freeplane.sourceforge.net -->
<node TEXT="Bookmarks" LOCALIZED_STYLE_REF="styles.topic" FOLDED="false" ID="ID_1723255651" CREATED="1283093380553" MODIFIED="1563126431524" LINK="https://github.com/lilive/Freeplane-Bookmarks-add-on" BORDER_COLOR_LIKE_EDGE="false" BORDER_COLOR="#000000" STYLE="rectangle" SHAPE_HORIZONTAL_MARGIN="6.0 pt" SHAPE_VERTICAL_MARGIN="6.0 pt">
<edge WIDTH="thin"/>
<hook NAME="MapStyle" background="#c4c4c4">
    <properties show_icon_for_attributes="true" fit_to_viewport="false" show_note_icons="true" show_notes_in_map="false" edgeColorConfiguration="#353535ff,#353535ff,#353535ff,#353535ff,#353535ff" MarksKeys="{&quot;108&quot;:&quot;ID_303460997&quot;,&quot;99&quot;:&quot;ID_1257390437&quot;,&quot;111&quot;:&quot;ID_185824507&quot;}" Marks_stored_node_id="ID_1837714869"/>

<map_styles>
<stylenode LOCALIZED_TEXT="styles.root_node" STYLE="oval" UNIFORM_SHAPE="true" VGAP_QUANTITY="24.0 pt">
<font SIZE="24"/>
<stylenode LOCALIZED_TEXT="styles.predefined" POSITION="right" STYLE="bubble">
<stylenode LOCALIZED_TEXT="default" ICON_SIZE="14.0 pt" MAX_WIDTH="600.0 px" COLOR="#000000" BACKGROUND_COLOR="#dddad7" BACKGROUND_ALPHA="0" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="4.0 pt" BORDER_WIDTH="0.0 px" BORDER_COLOR_LIKE_EDGE="false" BORDER_COLOR="#808080" BORDER_COLOR_ALPHA="0">
<font NAME="Candara" SIZE="14"/>
<edge STYLE="horizontal" COLOR="#818181" WIDTH="thin"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.details"/>
<stylenode LOCALIZED_TEXT="defaultstyle.attributes">
<font SIZE="9"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.note"/>
<stylenode LOCALIZED_TEXT="defaultstyle.floating">
<edge STYLE="hide_edge"/>
<cloud COLOR="#f0f0f0" SHAPE="ROUND_RECT"/>
</stylenode>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.user-defined" POSITION="right" STYLE="bubble">
<stylenode LOCALIZED_TEXT="styles.topic" STYLE="oval" SHAPE_HORIZONTAL_MARGIN="6.0 pt" SHAPE_VERTICAL_MARGIN="6.0 pt" UNIFORM_SHAPE="true" BORDER_WIDTH="4.0 px" BORDER_DASH="DASHES">
<font NAME="Raleway" SIZE="14" BOLD="true"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.subtopic" COLOR="#cc3300" STYLE="fork">
<font NAME="Liberation Sans" SIZE="10" BOLD="true"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.subsubtopic" COLOR="#669900">
<font NAME="Liberation Sans" SIZE="10" BOLD="true"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.important">
<icon BUILTIN="yes"/>
</stylenode>
<stylenode TEXT="Ligne 1" BACKGROUND_COLOR="#cccccc" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="4.0 pt" MAX_WIDTH="600.0 px" BORDER_WIDTH="3.0 px" BORDER_COLOR_LIKE_EDGE="true" BORDER_COLOR="#808080">
<font NAME="Raleway" SIZE="14"/>
<edge COLOR="#ff4a4a" WIDTH="3"/>
</stylenode>
<stylenode TEXT="Ligne 2" BACKGROUND_COLOR="#cccccc" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="4.0 pt" MAX_WIDTH="600.0 px" BORDER_WIDTH="3.0 px" BORDER_COLOR_LIKE_EDGE="true" BORDER_COLOR="#ffc265">
<font NAME="Raleway" SIZE="14"/>
<edge COLOR="#ffa14a" WIDTH="3"/>
</stylenode>
<stylenode TEXT="Ligne 3" BACKGROUND_COLOR="#cccccc" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="4.0 pt" MAX_WIDTH="600.0 px" BORDER_WIDTH="3.0 px" BORDER_COLOR_LIKE_EDGE="true" BORDER_COLOR="#feff62">
<font NAME="Raleway" SIZE="14"/>
<edge COLOR="#fff24a" WIDTH="3"/>
</stylenode>
<stylenode TEXT="Ligne 4" BACKGROUND_COLOR="#cccccc" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="4.0 pt" MAX_WIDTH="600.0 px" BORDER_WIDTH="3.0 px" BORDER_COLOR_LIKE_EDGE="true" BORDER_COLOR="#7dff72">
<font NAME="Raleway" SIZE="14"/>
<edge COLOR="#69ff4a" WIDTH="3"/>
</stylenode>
<stylenode TEXT="Ligne 5" BACKGROUND_COLOR="#cccccc" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="4.0 pt" MAX_WIDTH="600.0 px" BORDER_WIDTH="3.0 px" BORDER_COLOR_LIKE_EDGE="true" BORDER_COLOR="#61fff2">
<font NAME="Raleway" SIZE="14"/>
<edge COLOR="#4affe4" WIDTH="3"/>
</stylenode>
<stylenode TEXT="Ligne 6" BACKGROUND_COLOR="#cccccc" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="4.0 pt" MAX_WIDTH="600.0 px" BORDER_WIDTH="3.0 px" BORDER_COLOR_LIKE_EDGE="true" BORDER_COLOR="#6973ff">
<font NAME="Raleway" SIZE="14"/>
<edge COLOR="#6973ff" WIDTH="3"/>
</stylenode>
<stylenode TEXT="Ligne 7" BACKGROUND_COLOR="#cccccc" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="4.0 pt" MAX_WIDTH="600.0 px" BORDER_WIDTH="3.0 px" BORDER_COLOR_LIKE_EDGE="true" BORDER_COLOR="#ff6df2">
<font NAME="Raleway" SIZE="14"/>
<edge COLOR="#ff4af8" WIDTH="3"/>
</stylenode>
<stylenode TEXT="Code" BACKGROUND_COLOR="#ffffff" BACKGROUND_ALPHA="58" STYLE="rectangle" SHAPE_HORIZONTAL_MARGIN="4.0 pt" MAX_WIDTH="2000.0 px">
<font NAME="Source Code Pro" SIZE="12"/>
</stylenode>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.AutomaticLayout" POSITION="right" STYLE="bubble">
<stylenode LOCALIZED_TEXT="AutomaticLayout.level.root" COLOR="#000000">
<font SIZE="18"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,1" COLOR="#0033ff">
<font SIZE="16"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,2" COLOR="#00b439">
<font SIZE="14"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,3" COLOR="#990000">
<font SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,4" COLOR="#111111">
<font SIZE="10"/>
</stylenode>
</stylenode>
</stylenode>
</map_styles>
</hook>
<hook NAME="AutomaticEdgeColor" COUNTER="117" RULE="ON_BRANCH_CREATION"/>
<attribute_layout NAME_WIDTH="92.9999972283841 pt" VALUE_WIDTH="197.24999412149208 pt"/>
<attribute NAME="name" VALUE="bookmarks"/>
<attribute NAME="version" VALUE="v0.5.1"/>
<attribute NAME="author" VALUE="lilive"/>
<attribute NAME="freeplaneVersionFrom" VALUE="1.7.5"/>
<attribute NAME="freeplaneVersionTo" VALUE=""/>
<attribute NAME="updateUrl" VALUE=""/>
<richcontent TYPE="NOTE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      The homepage of this add-on should be set as the link of the root node.
    </p>
    <p>
      The basic properties of this add-on. They can be used in script names and other attributes, e.g. &quot;${name}.groovy&quot;.
    </p>
    <ul>
      <li>
        name: The name of the add-on, normally a technically one (no spaces, no special characters except _.-).
      </li>
      <li>
        author: Author's name(s) and (optionally) email adresses.
      </li>
      <li>
        version: Since it's difficult to protect numbers like 1.0 from Freeplane's number parser it's advised to prepend a 'v' to the number, e.g. 'v1.0'.
      </li>
      <li>
        freeplane-version-from: The oldest compatible Freeplane version. The add-on will not be installed if the Freeplane version is too old.
      </li>
      <li>
        freeplane-version-to: Normally empty: The newest compatible Freeplane version. The add-on will not be installed if the Freeplane version is too new.
      </li>
      <li>
        updateUrl: URL of the file containing information (version, download url) on the latest version of this add-on. By default: &quot;${homepage}/version.properties&quot;
      </li>
    </ul>
  </body>
</html>
</richcontent>
<node TEXT="description" POSITION="left" ID="ID_1114811084" CREATED="1562410359487" MODIFIED="1563126431576">
<edge COLOR="#353535"/>
<richcontent TYPE="NOTE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Description would be awkward to edit as an attribute.
    </p>
    <p>
      So you have to put the add-on description as a child of the <i>'description'</i>&#160;node.
    </p>
    <p>
      To translate the description you have to define a translation for the key 'addons.${name}.description'.
    </p>
  </body>
</html>
</richcontent>
<node TEXT="Add bookmarks to nodes, and easily navigate beetween them." ID="ID_1183587619" CREATED="1518707454288" MODIFIED="1518815727777"/>
</node>
<node TEXT="changes" POSITION="left" ID="ID_1094494132" CREATED="1562410359592" MODIFIED="1563126431580" TEXT_SHORTENED="true">
<edge COLOR="#353535"/>
<richcontent TYPE="NOTE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Change log of this add-on: append one node for each noteworthy version and put the details for each version into a child node.
    </p>
  </body>
</html>
</richcontent>
<node TEXT="v0.3" ID="ID_1947541306" CREATED="1518881580800" MODIFIED="1518881585971">
<node TEXT="First released version" ID="ID_1150257103" CREATED="1518881587391" MODIFIED="1518881596914"/>
</node>
<node TEXT="v0.4" ID="ID_1236674265" CREATED="1518881417536" MODIFIED="1518881420019">
<node TEXT="Clean the map storage each time ToggleBookmarkSelectionView is used (to avoid increasing size of the file)" ID="ID_955061404" CREATED="1518881423311" MODIFIED="1518881534034"/>
</node>
<node TEXT="v0.4.1" ID="ID_1277201401" CREATED="1518881390240" MODIFIED="1518881395099">
<node TEXT="The bookmark icon is now SVG" ID="ID_1361390652" CREATED="1518881396976" MODIFIED="1518881414405"/>
</node>
<node TEXT="v0.4.2" ID="ID_490789856" CREATED="1518883033697" MODIFIED="1518883037789">
<node TEXT="Sources files cleanup" ID="ID_655524488" CREATED="1518883038976" MODIFIED="1518883131764"/>
</node>
<node TEXT="v0.5.0" ID="ID_116400648" CREATED="1562409091573" MODIFIED="1562409097366">
<node TEXT="Complete rewrite of the add-on. Introduce named bookmarks." ID="ID_419235170" CREATED="1562409104741" MODIFIED="1562417968655"/>
</node>
<node TEXT="v0.5.1" ID="ID_540433193" CREATED="1562499877679" MODIFIED="1562499881604">
<node TEXT="- Renamed bookmarks icons (because of conflict with freeplane builtin bookmark icon)&#xa;- Jump to previous/next bookmark commands&#xa;- Better GUI text&#xa;- GUI translation&#xa;- Command to update bookmarks created with previous versions" ID="ID_27269396" CREATED="1562499884480" MODIFIED="1562698264366"/>
</node>
</node>
<node TEXT="license" FOLDED="true" POSITION="left" ID="ID_230785910" CREATED="1562410359599" MODIFIED="1563126431583" TEXT_SHORTENED="true">
<edge COLOR="#353535"/>
<richcontent TYPE="NOTE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      The add-ons's license that the user has to accept before she can install it.
    </p>
    <p>
      
    </p>
    <p>
      The License text has to be entered as a child of the <i>'license'</i>&#160;node, either as plain text or as HTML.
    </p>
  </body>
</html>
</richcontent>
<node TEXT="&#xa;This add-on is free software: you can redistribute it and/or modify&#xa;it under the terms of the GNU General Public License as published by&#xa;the Free Software Foundation, either version 2 of the License, or&#xa;(at your option) any later version.&#xa;&#xa;This program is distributed in the hope that it will be useful,&#xa;but WITHOUT ANY WARRANTY; without even the implied warranty of&#xa;MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the&#xa;GNU General Public License for more details.&#xa;" ID="ID_1167386088" CREATED="1562410359607" MODIFIED="1562410359614"/>
</node>
<node TEXT="preferences.xml" POSITION="left" ID="ID_1098616655" CREATED="1562410359628" MODIFIED="1563126431588" TEXT_SHORTENED="true">
<edge COLOR="#353535"/>
<richcontent TYPE="NOTE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#000000" face="SansSerif, sans-serif">The child node contains the add-on configuration as an extension to mindmapmodemenu.xml (in Tools-&gt;Preferences-&gt;Add-ons). </font>
    </p>
    <p>
      <font color="#000000" face="SansSerif, sans-serif">Every property in the configuration should receive a default value in <i>default.properties</i>&#160;node.</font>
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT="default.properties" POSITION="left" ID="ID_151630546" CREATED="1562410359652" MODIFIED="1563126431591" TEXT_SHORTENED="true">
<edge COLOR="#353535"/>
<richcontent TYPE="NOTE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      These properties are used for:
    </p>
    <ul>
      <li>
        Each property defined in the preferences should have a default value in the attributes of this node.
      </li>
      <li>
        For each menu item with an icon add an attribute with the icon key (use developer tool menuItemInfo) as key and the icon path as value. Example: '${name}.icon': '/images/${name}-icon.png'
      </li>
    </ul>
  </body>
</html>
</richcontent>
</node>
<node TEXT="translations" POSITION="left" ID="ID_255907585" CREATED="1562410359658" MODIFIED="1563126431594" TEXT_SHORTENED="true">
<edge COLOR="#353535"/>
<richcontent TYPE="NOTE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      The translation keys that this script uses. Define one child node per supported locale. The attributes contain the translations. Define at least
    </p>
    <ul>
      <li>
        'addons.${name}' for the add-on's name
      </li>
      <li>
        'addons.${name}.description' for the description, e.g. in the add-on overview dialog (not necessary for English)
      </li>
      <li>
        'addons.${name}.&lt;scriptname&gt;' for each script since it will be the menu title.
      </li>
    </ul>
  </body>
</html>
</richcontent>
<node TEXT="en" ID="ID_737947027" CREATED="1562410359665" MODIFIED="1563020698222">
<attribute_layout NAME_WIDTH="170.999994903803 pt" VALUE_WIDTH="320.9999904334548 pt"/>
<attribute NAME="addons.${name}" VALUE="Bookmarks"/>
<attribute NAME="addons.${name}._10_BookmarkNode" VALUE="Add / Remove a bookmark"/>
<attribute NAME="addons.${name}._20_ToggleBookmark" VALUE="Toggle the bookmark"/>
<attribute NAME="addons.${name}._30_JumpToBookmark" VALUE="Jump to bookmark"/>
<attribute NAME="addons.${name}._35_JumpToPreviousBookmark" VALUE="Jump to previous bookmark"/>
<attribute NAME="addons.${name}._36_JumpToNextBookmark" VALUE="Jump to next bookmark"/>
<attribute NAME="addons.${name}._50_CreateLinkInBookmark" VALUE="Create link in bookmarked node"/>
<attribute NAME="addons.${name}._51_CreateLinkToBookmark" VALUE="Create link to bookmarked node"/>
<attribute NAME="addons.${name}._95_FixOldVersionNamedBookmarks" VALUE="Fix named bookmarks created by an old version of the add-on"/>
<attribute NAME="addons.${name}._90_ConvertFPBookmarks" VALUE="Convert all regular FreePlane bookmark icons (star icon) to add-on bookmarks"/>
<attribute NAME="addons.${name}._91_ConvertBookmarksToFP" VALUE="Convert all bookmarks to regular FreePlane bookmark icons (star icon)"/>
<attribute NAME="_50_bookmarksLinks" VALUE="Create links"/>
<attribute NAME="_90_bookmarksTools" VALUE="Tools"/>
<attribute NAME="addons.${name}.T_BM_operation_aborded" VALUE="Bookmark operation aborded"/>
<attribute NAME="addons.${name}.T_BM_win_title" VALUE="Bookmarks"/>
<attribute NAME="addons.${name}.T_BMs_updated" VALUE="Bookmarks updated"/>
<attribute NAME="addons.${name}.T_NBM_are" VALUE="Already named bookmarks are"/>
<attribute NAME="addons.${name}.T_arrow_select" VALUE="Select a bookmark with the &lt;i&gt;arrow keys&lt;/i&gt; and press &lt;i&gt;Enter&lt;/i&gt;"/>
<attribute NAME="addons.${name}.T_change_NBM_name" VALUE="Change the name of this bookmark"/>
<attribute NAME="addons.${name}.T_click_BM" VALUE="Click a bookmark"/>
<attribute NAME="addons.${name}.T_create_NBM" VALUE="Create a named bookmark"/>
<attribute NAME="addons.${name}.T_create_SBM" VALUE="Create a regular bookmark"/>
<attribute NAME="addons.${name}.T_create_link_in" VALUE="Create a link to the currently selected node"/>
<attribute NAME="addons.${name}.T_create_link_in_win_title" VALUE="Create a link in..."/>
<attribute NAME="addons.${name}.T_create_link_to" VALUE="Create a link in the currently selected node"/>
<attribute NAME="addons.${name}.T_create_link_to_win_title" VALUE="Create a link to..."/>
<attribute NAME="addons.${name}.T_created_link_in_NBM" VALUE="A link to this node has been created in the node bookmarked with the name"/>
<attribute NAME="addons.${name}.T_created_link_in_SBM" VALUE="A link to this node has been created in the selected bookmarked node"/>
<attribute NAME="addons.${name}.T_created_link_to_NBM" VALUE="A link has been created to the bookmark named"/>
<attribute NAME="addons.${name}.T_created_link_to_SBM" VALUE="A link to the selected bookmark has been created"/>
<attribute NAME="addons.${name}.T_delete_BM" VALUE="Delete this bookmark"/>
<attribute NAME="addons.${name}.T_icons_converted" VALUE="icons converted"/>
<attribute NAME="addons.${name}.T_jump_aborded" VALUE="Jump to bookmark aborded"/>
<attribute NAME="addons.${name}.T_jump_to_NBM" VALUE="Jump to bookmark named"/>
<attribute NAME="addons.${name}.T_jump_to_SBM" VALUE="Jump to bookmark"/>
<attribute NAME="addons.${name}.T_jumped_to_NBM" VALUE="Jumped to bookmark named"/>
<attribute NAME="addons.${name}.T_jumped_to_SBM" VALUE="Jumped to standard bookmark"/>
<attribute NAME="addons.${name}.T_kbd_backspace" VALUE="Backspace"/>
<attribute NAME="addons.${name}.T_kbd_esc" VALUE="Esc"/>
<attribute NAME="addons.${name}.T_kbd_other" VALUE="Other key"/>
<attribute NAME="addons.${name}.T_kbd_space" VALUE="Space"/>
<attribute NAME="addons.${name}.T_link_aborded" VALUE="Link creation aborded"/>
<attribute NAME="addons.${name}.T_no_bookmarks" VALUE="There is no bookmarks"/>
<attribute NAME="addons.${name}.T_no_conversion_required" VALUE="Nothing to do"/>
<attribute NAME="addons.${name}.T_no_next_BM" VALUE="No next bookmark"/>
<attribute NAME="addons.${name}.T_no_node_with_key" VALUE="There is no node marked with the key"/>
<attribute NAME="addons.${name}.T_no_prev_BM" VALUE="No previous bookmark"/>
<attribute NAME="addons.${name}.T_no_update_required" VALUE="No update required"/>
<attribute NAME="addons.${name}.T_node_already_BM" VALUE="This node is already bookmarked."/>
<attribute NAME="addons.${name}.T_node_already_NBM" VALUE="This node already has a named bookmark."/>
<attribute NAME="addons.${name}.T_node_no_BM_anymore" VALUE="This node has no bookmark anymore"/>
<attribute NAME="addons.${name}.T_node_now_NBM" VALUE="This node now has a bookmark named"/>
<attribute NAME="addons.${name}.T_node_now_SBM" VALUE="This node now has a regular bookmark"/>
<attribute NAME="addons.${name}.T_press_esc_cancel" VALUE="Press &lt;i&gt;Esc&lt;/i&gt; to cancel"/>
<attribute NAME="addons.${name}.T_press_red_key" VALUE="Press one of the red keys"/>
<attribute NAME="addons.${name}.T_replace_by_NBM" VALUE="Create instead a named bookmark"/>
<attribute NAME="addons.${name}.T_replace_by_SBM" VALUE="Create instead a regular bookmark"/>
<attribute NAME="addons.${name}.T_select_BM_to_jump" VALUE="Select the bookmark you want to jump to"/>
<attribute NAME="addons.${name}.T_select_BM_to_link_in" VALUE="Select the node where to create the link"/>
<attribute NAME="addons.${name}.T_select_BM_to_link_to" VALUE="Select the bookmark you want to link"/>
<attribute NAME="addons.${name}.T_select_NBM_to_jump" VALUE="Select the named bookmark you want to jump to"/>
<attribute NAME="addons.${name}.T_select_node_to_link_in" VALUE="Select the node where to create the link"/>
<attribute NAME="addons.${name}.T_space_to_link_in_memorized" VALUE="Press &lt;i&gt;Space&lt;/i&gt; to create the link in the memorized node"/>
<attribute NAME="addons.${name}.T_space_to_link_to_memorized" VALUE="Press &lt;i&gt;Space&lt;/i&gt; to link to memorized node"/>
<attribute NAME="addons.${name}.T_storage_erased" VALUE="Bookmarks datas erased"/>
<attribute NAME="addons.${name}.T_tab_to_display_NBM" VALUE="Press &lt;i&gt;Tab&lt;/i&gt; to display named bookmarks"/>
<attribute NAME="addons.${name}.T_tab_to_display_SBM" VALUE="Press &lt;i&gt;Tab&lt;/i&gt; to display standard bookmarks"/>
<attribute NAME="addons.${name}.T_tip_create_link_in_NBM" VALUE="To create a link in a bookmarked node either"/>
<attribute NAME="addons.${name}.T_tip_create_link_in_SBM" VALUE="To create a link in a bookmarked node either"/>
<attribute NAME="addons.${name}.T_tip_create_link_to_NBM" VALUE="To select the target for the link either"/>
<attribute NAME="addons.${name}.T_tip_create_link_to_SBM" VALUE="To select the target for the link either"/>
<attribute NAME="addons.${name}.T_tip_jump_to_NBM" VALUE="To jump to a named bookmark either"/>
<attribute NAME="addons.${name}.T_tip_jump_to_SBM" VALUE="To jump to a bookmark either"/>
<attribute NAME="addons.${name}.T_to_cancel" VALUE="to cancel"/>
<attribute NAME="addons.${name}.T_BMs_to_FP_win_title" VALUE="Bookmarks conversion"/>
<attribute NAME="addons.${name}.T_convert_BM_FP_warning" VALUE="This will convert all bookmarks to FreePlane regular bookmark icons (the star icons).\nThe bookmarks names will be lost.\nThis operation can not be undone. Do you want to proceed ?"/>
<attribute NAME="addons.${name}.T_op_canceled" VALUE="Operation canceled."/>
<attribute NAME="addons.${name}.T_FP_to_BM_win_title" VALUE="Convert FreePlane bookmarks"/>
<attribute NAME="addons.${name}.T_convert_FP_BM_warning" VALUE="This will convert all FreePlane regular bookmark icons (the star icons)\nto bookmarks to be use by this add-on.\nDo you want to proceed ?"/>
<attribute NAME="addons.${name}.T_BMs_created" VALUE="bookmarks created"/>
<attribute NAME="addons.${name}.T_no_BMs_created" VALUE="No bookmarks created"/>
<attribute NAME="addons.${name}.T_convert_v050_NMBs_win_title" VALUE="Fix v0.5.0 named bookmarks"/>
<attribute NAME="addons.${name}.T_convert_v050_NBMs_warning" VALUE="This will update all named bookmarks in this map created with the v0.5.0 of this add-on.\nYou don&apos;t need this if you&apos;ve never used v0.5.0. Proceed ?"/>
<attribute NAME="addons.${name}.T_v050_NBMs_converted" VALUE="bookmarks have been converted"/>
<attribute NAME="addons.${name}.T_and" VALUE="and"/>
<attribute NAME="addons.${name}.T_NBMs_anonymized" VALUE="actual named bookmarks have been converted to standard bookmarks\nbecause their key is used by a converted bookmark"/>
<attribute NAME="addons.${name}.T_no_v050_NBMs_converted" VALUE="This map doesn&apos;t contain v0.5.0 named bookmarks"/>
</node>
<node TEXT="fr" ID="ID_1748679509" CREATED="1562410359665" MODIFIED="1563115716091">
<attribute_layout NAME_WIDTH="170.24999492615476 pt" VALUE_WIDTH="320.9999904334548 pt"/>
<attribute NAME="addons.${name}" VALUE="Marque-pages"/>
<attribute NAME="addons.${name}._10_BookmarkNode" VALUE="Placer / Supprimer un marque-page"/>
<attribute NAME="addons.${name}._20_ToggleBookmark" VALUE="Basculer un marque-page"/>
<attribute NAME="addons.${name}._30_JumpToBookmark" VALUE="Atteindre un marque-page"/>
<attribute NAME="addons.${name}._35_JumpToPreviousBookmark" VALUE="Atteindre le marque-page pr\u00E9c\u00E9dent"/>
<attribute NAME="addons.${name}._36_JumpToNextBookmark" VALUE="Atteindre le marque-page suivant"/>
<attribute NAME="addons.${name}._50_CreateLinkInBookmark" VALUE="Cr\u00E9er un lien dans un marque-page"/>
<attribute NAME="addons.${name}._51_CreateLinkToBookmark" VALUE="Cr\u00E9er un lien vers un marque-page"/>
<attribute NAME="addons.${name}._95_FixOldVersionNamedBookmarks" VALUE="R\u00E9cup\u00E8re les marque-pages nomm\u00E9s d&apos;une version ant\u00E9rieure du module"/>
<attribute NAME="addons.${name}._90_ConvertFPBookmarks" VALUE="Convertir toutes les ic\u00F4nes de marque-page de FreePlane (\u00E9toile) en marque-pages pour ce module"/>
<attribute NAME="addons.${name}._91_ConvertBookmarksToFP" VALUE="Convertir tous les marque-pages en ic\u00F4nes de marque-page de FreePlane (\u00E9toile)"/>
<attribute NAME="_50_bookmarksLinks" VALUE="Cr\u00E9er des liens"/>
<attribute NAME="_90_bookmarksTools" VALUE="Outils"/>
<attribute NAME="addons.${name}.T_BM_operation_aborded" VALUE="Op\u00E9ration abandonn\u00E9e"/>
<attribute NAME="addons.${name}.T_BM_win_title" VALUE="Marque-pages"/>
<attribute NAME="addons.${name}.T_BMs_updated" VALUE="Bookmarks updated"/>
<attribute NAME="addons.${name}.T_NBM_are" VALUE="Les marque-pages nomm\u00E9s sont"/>
<attribute NAME="addons.${name}.T_arrow_select" VALUE="Choisir un marque-page avec les &lt;i&gt;touches fl\u00E9ch\u00E9es&lt;/i&gt; et appuyer sur &lt;i&gt;Entr\u00E9e&lt;/i&gt;"/>
<attribute NAME="addons.${name}.T_change_NBM_name" VALUE="Changer le nom de ce marque-page"/>
<attribute NAME="addons.${name}.T_click_BM" VALUE="Cliquer un marque-page"/>
<attribute NAME="addons.${name}.T_create_NBM" VALUE="Cr\u00E9er un marque-page nomm\u00E9"/>
<attribute NAME="addons.${name}.T_create_SBM" VALUE="Cr\u00E9er un marque-page standard"/>
<attribute NAME="addons.${name}.T_create_link_in" VALUE="Cr\u00E9ation d&apos;un lien vers le noeud actuellement s\u00E9lectionn\u00E9 sur la carte"/>
<attribute NAME="addons.${name}.T_create_link_in_win_title" VALUE="Cr\u00E9er un lien dans..."/>
<attribute NAME="addons.${name}.T_create_link_to" VALUE="Cr\u00E9ation d&apos;un lien dans le noeud actuellement s\u00E9lectionn\u00E9 sur la carte"/>
<attribute NAME="addons.${name}.T_create_link_to_win_title" VALUE="Cr\u00E9er un lien vers..."/>
<attribute NAME="addons.${name}.T_created_link_in_NBM" VALUE="Un lien vers ce noeud a \u00E9t\u00E9 cr\u00E9\u00E9 dans le noeud contenant le marque-page nomm\u00E9"/>
<attribute NAME="addons.${name}.T_created_link_in_SBM" VALUE="Un lien vers ce noeud a \u00E9t\u00E9 cr\u00E9\u00E9 dans le noeud contenant le marque-page s\u00E9lectionn\u00E9"/>
<attribute NAME="addons.${name}.T_created_link_to_NBM" VALUE="Un lien a \u00E9t\u00E9 cr\u00E9\u00E9 vers le marque-page nomm\u00E9"/>
<attribute NAME="addons.${name}.T_created_link_to_SBM" VALUE="Un lien a \u00E9t\u00E9 cr\u00E9\u00E9 vers le marque-page s\u00E9lectionn\u00E9"/>
<attribute NAME="addons.${name}.T_delete_BM" VALUE="Effacer ce marque-page"/>
<attribute NAME="addons.${name}.T_icons_converted" VALUE="ic\u00F4nes converties"/>
<attribute NAME="addons.${name}.T_jump_aborded" VALUE="Saut annul\u00E9"/>
<attribute NAME="addons.${name}.T_jump_to_NBM" VALUE="Atteindre un marque-page nomm\u00E9"/>
<attribute NAME="addons.${name}.T_jump_to_SBM" VALUE="Atteindre un marque-page"/>
<attribute NAME="addons.${name}.T_jumped_to_NBM" VALUE="Saut au marque-page nomm\u00E9"/>
<attribute NAME="addons.${name}.T_jumped_to_SBM" VALUE="Saut au marque-page standard"/>
<attribute NAME="addons.${name}.T_kbd_backspace" VALUE="Effacement arri\u00E8re"/>
<attribute NAME="addons.${name}.T_kbd_esc" VALUE="\u00C9chap"/>
<attribute NAME="addons.${name}.T_kbd_other" VALUE="Autre touche"/>
<attribute NAME="addons.${name}.T_kbd_space" VALUE="Espace"/>
<attribute NAME="addons.${name}.T_link_aborded" VALUE="Cr\u00E9ation du lien annul\u00E9e"/>
<attribute NAME="addons.${name}.T_no_bookmarks" VALUE="Il n&apos;y a pas de marque-pages"/>
<attribute NAME="addons.${name}.T_no_conversion_required" VALUE="Il n&apos;y a rien \u00E0 faire"/>
<attribute NAME="addons.${name}.T_no_next_BM" VALUE="Pas de marque-page suivant"/>
<attribute NAME="addons.${name}.T_no_node_with_key" VALUE="Il n&apos;y a pas de marque-page pour la touche"/>
<attribute NAME="addons.${name}.T_no_prev_BM" VALUE="Pas de marque-page pr\u00E9c\u00E9dent"/>
<attribute NAME="addons.${name}.T_no_update_required" VALUE="Pas de mise-\u00E0-jour n\u00E9cessaire"/>
<attribute NAME="addons.${name}.T_node_already_BM" VALUE="Ce noeud a d\u00E9j\u00E0 un marque-page."/>
<attribute NAME="addons.${name}.T_node_already_NBM" VALUE="Ce noeud a d\u00E9j\u00E0 un marque-page nomm\u00E9."/>
<attribute NAME="addons.${name}.T_node_no_BM_anymore" VALUE="Ce noeud n&apos;a plus de marque-page"/>
<attribute NAME="addons.${name}.T_node_now_NBM" VALUE="Ce noeud a maintenant un marque-page nomm\u00E9"/>
<attribute NAME="addons.${name}.T_node_now_SBM" VALUE="Ce noeud a maintenant un marque-page standard"/>
<attribute NAME="addons.${name}.T_press_esc_cancel" VALUE="Presser &lt;i&gt;\u00C9chap&lt;/i&gt; pour annuler"/>
<attribute NAME="addons.${name}.T_press_red_key" VALUE="Presser une des touches affich\u00E9es en rouges"/>
<attribute NAME="addons.${name}.T_replace_by_NBM" VALUE="Cr\u00E9er un marque-page nomm\u00E9 \u00E0 la place"/>
<attribute NAME="addons.${name}.T_replace_by_SBM" VALUE="Cr\u00E9er un marque-page standard \u00E0 la place"/>
<attribute NAME="addons.${name}.T_select_BM_to_jump" VALUE="Choisir le marque-page que vous voulez atteindre"/>
<attribute NAME="addons.${name}.T_select_BM_to_link_in" VALUE="Choisir le noeud o\u00F9 cr\u00E9er le lien"/>
<attribute NAME="addons.${name}.T_select_BM_to_link_to" VALUE="Choisir le marque-page vers lequel cr\u00E9er un lien"/>
<attribute NAME="addons.${name}.T_select_NBM_to_jump" VALUE="Choisir le marque-page nomm\u00E9 que vous voulez atteindre"/>
<attribute NAME="addons.${name}.T_select_node_to_link_in" VALUE="Choisir le noeud o\u00F9 cr\u00E9er le lien"/>
<attribute NAME="addons.${name}.T_space_to_link_in_memorized" VALUE="Presser &lt;i&gt;Espace&lt;/i&gt; pour cr\u00E9er un lien \u00E0 ce noeud dans le noeud m\u00E9moris\u00E9"/>
<attribute NAME="addons.${name}.T_space_to_link_to_memorized" VALUE="Presser &lt;i&gt;Espace&lt;/i&gt; pour lier au noeud m\u00E9moris\u00E9"/>
<attribute NAME="addons.${name}.T_storage_erased" VALUE="Donn\u00E9es des marque-pages effac\u00E9es"/>
<attribute NAME="addons.${name}.T_tab_to_display_NBM" VALUE="Appuyer sur &lt;i&gt;Tab&lt;/i&gt; pour afficher les marque-pages nomm\u00E9s"/>
<attribute NAME="addons.${name}.T_tab_to_display_SBM" VALUE="Appuyer sur &lt;i&gt;Tab&lt;/i&gt; pour afficher les marque-pages standards"/>
<attribute NAME="addons.${name}.T_tip_create_link_in_NBM" VALUE="Pour s\u00E9lectionner le noeud o\u00F9 cr\u00E9er le lien"/>
<attribute NAME="addons.${name}.T_tip_create_link_in_SBM" VALUE="Pour s\u00E9lectionner le noeud o\u00F9 cr\u00E9er le lien"/>
<attribute NAME="addons.${name}.T_tip_create_link_to_NBM" VALUE="Pour s\u00E9lectionner le marque-page cible du lien"/>
<attribute NAME="addons.${name}.T_tip_create_link_to_SBM" VALUE="Pour s\u00E9lectionner le marque-page cible du lien"/>
<attribute NAME="addons.${name}.T_tip_jump_to_NBM" VALUE="Pour atteindre un marque-page nomm\u00E9"/>
<attribute NAME="addons.${name}.T_tip_jump_to_SBM" VALUE="Pour atteindre un marque-page"/>
<attribute NAME="addons.${name}.T_to_cancel" VALUE="pour annuler"/>
<attribute NAME="addons.${name}.T_BMs_to_FP_win_title" VALUE="Conversion des marque-pages"/>
<attribute NAME="addons.${name}.T_convert_BM_FP_warning" VALUE="Ceci va convertir tous les marque-pages en ic\u00F4ne de marque-page de FreePlane (celui en forme d&apos;\u00E9toile).\nLes noms des marque-pages seront perdus.\nCette op\u00E9ration est irr\u00E9versible. Voulez-vous continuer ?"/>
<attribute NAME="addons.${name}.T_op_canceled" VALUE="Op\u00E9ration annul\u00E9e."/>
<attribute NAME="addons.${name}.T_FP_to_BM_win_title" VALUE="Conversion des marque-pages de FreePlane"/>
<attribute NAME="addons.${name}.T_convert_FP_BM_warning" VALUE="Ceci va convertir toutes les ic\u00F4nes de marque-page de FreePlane (les ic\u00F4nes en forme d&apos;\u00E9toile)\nen marque-pages utilisables par ce module.\nVoulez-vous continuer ?"/>
<attribute NAME="addons.${name}.T_BMs_created" VALUE="marque-pages cr\u00E9\u00E9s"/>
<attribute NAME="addons.${name}.T_no_BMs_created" VALUE="Pas de marque-pages cr\u00E9\u00E9s"/>
<attribute NAME="addons.${name}.T_convert_v050_NMBs_win_title" VALUE="R\u00E9parer les marques-pages nomm\u00E9s v0.5.0"/>
<attribute NAME="addons.${name}.T_convert_v050_NBMs_warning" VALUE="En continuant vous allez mettre \u00E0 jour les marque-pages nomm\u00E9s cr\u00E9\u00E9s par la version v0.5.0 du module.\nVous n&apos;avez besoin de le faire que si vous avez utilis\u00E9 la v0.5.0. Continuer ?"/>
<attribute NAME="addons.${name}.T_v050_NBMs_converted" VALUE="marque-pages ont \u00E9t\u00E9 mis \u00E0 jour"/>
<attribute NAME="addons.${name}.T_and" VALUE="et"/>
<attribute NAME="addons.${name}.T_NBMs_anonymized" VALUE="marques-pages actuels ont \u00E9t\u00E9 transform\u00E9s en marques-pages standard\ncar ils avaient le m\u00EAme nom qu&apos;un marque-page mis \u00E0 jour"/>
<attribute NAME="addons.${name}.T_no_v050_NBMs_converted" VALUE="Cette carte ne contient pas de marques-pages nomm\u00E9s de la version v0.5.0"/>
</node>
</node>
<node TEXT="deinstall" POSITION="left" ID="ID_1870605844" CREATED="1562410359689" MODIFIED="1563126448690">
<edge COLOR="#353535"/>
<richcontent TYPE="NOTE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      List of files and/or directories to remove on uninstall
    </p>
  </body>
</html>
</richcontent>
<attribute_layout VALUE_WIDTH="389.9999883770946 pt"/>
<attribute NAME="delete" VALUE="${installationbase}/addons/${name}.script.xml"/>
<attribute NAME="delete" VALUE="${installationbase}/icons/bookmarks/Bookmark 1.svg"/>
<attribute NAME="delete" VALUE="${installationbase}/icons/bookmarks/Bookmark 2.svg"/>
<attribute NAME="delete" VALUE="${installationbase}/scripts/init/BookmarksMonitorIcons.groovy"/>
<attribute NAME="delete" VALUE="${installationbase}/addons/${name}/scripts/_10_BookmarkNode.groovy"/>
<attribute NAME="delete" VALUE="${installationbase}/addons/${name}/scripts/_20_ToggleBookmark.groovy"/>
<attribute NAME="delete" VALUE="${installationbase}/addons/${name}/scripts/_30_JumpToBookmark.groovy"/>
<attribute NAME="delete" VALUE="${installationbase}/addons/${name}/scripts/_35_JumpToPreviousBookmark.groovy"/>
<attribute NAME="delete" VALUE="${installationbase}/addons/${name}/scripts/_36_JumpToNextBookmark.groovy"/>
<attribute NAME="delete" VALUE="${installationbase}/addons/${name}/scripts/_50_CreateLinkInBookmark.groovy"/>
<attribute NAME="delete" VALUE="${installationbase}/addons/${name}/scripts/_51_CreateLinkToBookmark.groovy"/>
<attribute NAME="delete" VALUE="${installationbase}/addons/${name}/scripts/_95_FixOldVersionNamedBookmarks.groovy"/>
<attribute NAME="delete" VALUE="${installationbase}/addons/${name}/scripts/_91_ConvertBookmarksToFP.groovy"/>
<attribute NAME="delete" VALUE="${installationbase}/addons/${name}/scripts/_90_ConvertFPBookmarks.groovy"/>
<attribute NAME="delete" VALUE="${installationbase}/lib/bookmarks/Bookmarks.groovy"/>
</node>
<node TEXT="scripts" POSITION="right" ID="ID_1460492722" CREATED="1562410359701" MODIFIED="1563126431608" TEXT_SHORTENED="true">
<edge COLOR="#353535"/>
<richcontent TYPE="NOTE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      An add-on may contain multiple scripts. The node text defines the script name (e.g. insertInlineImage.groovy). The name must have a suffix of a supported script language like .groovy or .js and may only consist of letters and digits. The script properties have to be configured via attributes:
    </p>
    <p>
      
    </p>
    <p>
      * menuLocation: &lt;locationkey&gt;
    </p>
    <p>
      &#160;&#160;&#160;- Defines the menu location, defaults a sub menu 'main_menu_scripting/addons.${name}'.
    </p>
    <p>
      &#160;&#160;&#160;-&#160;Use developer tool menuItemInfo to inspect menu location keys.
    </p>
    <p>
      &#160;&#160;&#160;- This attribute is mandatory
    </p>
    <p>
      
    </p>
    <p>
      * menuTitleKey: &lt;key&gt;
    </p>
    <p>
      &#160;&#160;&#160;- The menu item title will be looked up under the translation key &lt;key&gt; - don't forget to define its translation.
    </p>
    <p>
      &#160;&#160;&#160;- This attribute is mandatory
    </p>
    <p>
      
    </p>
    <p>
      * executionMode: &lt;mode&gt;
    </p>
    <p>
      &#160;&#160;&#160;- The execution mode as described in the Freeplane wiki (http://freeplane.sourceforge.net/wiki/index.php/Scripting)
    </p>
    <p>
      &#160;&#160;&#160;- ON_SINGLE_NODE: Execute the script once. The <i>node</i>&#160;variable is set to the selected node.
    </p>
    <p>
      &#160;&#160;&#160;- ON_SELECTED_NODE: Execute the script n times for n selected nodes, once for each node.
    </p>
    <p>
      &#160;&#160;&#160;- ON_SELECTED_NODE_RECURSIVELY: Execute the script on every selected node and recursively on all of its children.
    </p>
    <p>
      &#160;&#160;&#160;- In doubt use ON_SINGLE_NODE.
    </p>
    <p>
      &#160;&#160;&#160;- This attribute is mandatory
    </p>
    <p>
      
    </p>
    <p>
      * keyboardShortcut: &lt;shortcut&gt;
    </p>
    <p>
      &#160;&#160;&#160;- Optional: keyboard combination / accelerator for this script, e.g. control alt I
    </p>
    <p>
      &#160;&#160;&#160;- Use lowercase letters for modifiers and uppercase for letters. Use no + signs.
    </p>
    <p>
      &#160;&#160;&#160;- The available key names are listed at http://download.oracle.com/javase/1.4.2/docs/api/java/awt/event/KeyEvent.html#VK_0
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;In the list only entries with a 'VK_' prefix count. Omit the prefix in the shortcut definition.
    </p>
    <p>
      
    </p>
    <p>
      * Permissions&#160;that the script(s) require, each either false or true:
    </p>
    <p>
      &#160;&#160;&#160;- execute_scripts_without_asking
    </p>
    <p>
      &#160;&#160;&#160;- execute_scripts_without_file_restriction: permission to read files
    </p>
    <p>
      &#160;&#160;&#160;- execute_scripts_without_write_restriction: permission to create/change/delete files
    </p>
    <p>
      &#160;&#160;&#160;- execute_scripts_without_exec_restriction: permission to execute other programs
    </p>
    <p>
      &#160;&#160;&#160;- execute_scripts_without_network_restriction: permission to access the network
    </p>
    <p>
      &#160;&#160;Notes:
    </p>
    <p>
      &#160;&#160;- The set of permissions is fixed.
    </p>
    <p>
      &#160;&#160;- Don't change the attribute names, don't omit one.
    </p>
    <p>
      &#160;&#160;- Set the values either to true or to false
    </p>
    <p>
      &#160;&#160;- In any case set execute_scripts_without_asking to true unless you want to annoy users.
    </p>
  </body>
</html>
</richcontent>
<node TEXT="_10_BookmarkNode.groovy" FOLDED="true" ID="ID_1722187040" CREATED="1562410359729" MODIFIED="1562412132309">
<attribute_layout NAME_WIDTH="172.49999485909953 pt" VALUE_WIDTH="213.7499936297538 pt"/>
<attribute NAME="menuTitleKey" VALUE="addons.${name}._10_BookmarkNode"/>
<attribute NAME="menuLocation" VALUE="/menu_bar/${name}"/>
<attribute NAME="executionMode" VALUE="on_single_node"/>
<attribute NAME="keyboardShortcut" VALUE=""/>
<attribute NAME="execute_scripts_without_asking" VALUE="true"/>
<attribute NAME="execute_scripts_without_file_restriction" VALUE="true"/>
<attribute NAME="execute_scripts_without_write_restriction" VALUE="false"/>
<attribute NAME="execute_scripts_without_exec_restriction" VALUE="false"/>
<attribute NAME="execute_scripts_without_network_restriction" VALUE="false"/>
<node TEXT="// Create a bookmark (or delete an existing one) in this node&#xd;&#xa;&#xd;&#xa;import org.freeplane.plugin.script.proxy.Convertible&#xd;&#xa;import groovy.json.JsonBuilder&#xd;&#xa;import groovy.json.JsonSlurper&#xd;&#xa;import groovy.swing.SwingBuilder&#xd;&#xa;import javax.swing.JFrame&#xd;&#xa;import javax.swing.BoxLayout&#xd;&#xa;import java.awt.event.*&#xd;&#xa;import java.awt.Color&#xd;&#xa;import java.awt.Component&#xd;&#xa;import java.awt.BorderLayout&#xd;&#xa;import bookmarks.Bookmarks as BM&#xd;&#xa;&#xd;&#xa;def namedBookmarks = BM.loadNamedBookmarks( node.map )&#xd;&#xa;namedBookmarks = BM.fixNamedBookmarksInconsistency( namedBookmarks, node.map )&#xd;&#xa;def isAnonymousBookmark = BM.isAnonymousBookmarked( node )&#xd;&#xa;def isNamedBookmark = BM.isNamedBookmarked( node, namedBookmarks )&#xd;&#xa;&#xd;&#xa;// Create the graphical user interface to display&#xd;&#xa;def gui&#xd;&#xa;groovy.swing.SwingBuilder.build&#xd;&#xa;{&#xd;&#xa;    gui = dialog(&#xd;&#xa;        title: BM.gtt( &apos;T_BM_win_title&apos; ),&#xd;&#xa;        modal: true,&#xd;&#xa;        owner: ui.frame,&#xd;&#xa;        defaultCloseOperation: JFrame.DISPOSE_ON_CLOSE,&#xd;&#xa;        pack: true&#xd;&#xa;    ){&#xd;&#xa;        borderLayout()&#xd;&#xa;        def blue = new Color( 0, 0, 255 )&#xd;&#xa;&#xd;&#xa;        // Fist panel : instructions&#xd;&#xa;        panel(&#xd;&#xa;            border: emptyBorder( 10 ),&#xd;&#xa;            constraints: BorderLayout.PAGE_START,&#xd;&#xa;        ){&#xd;&#xa;            boxLayout(axis: BoxLayout.Y_AXIS )&#xd;&#xa;            if( isAnonymousBookmark )&#xd;&#xa;            {&#xd;&#xa;                label(&#xd;&#xa;                    text: BM.gtt( &apos;T_node_already_BM&apos; ),&#xd;&#xa;                    foreground: blue,&#xd;&#xa;                    border: emptyBorder( 0, 0, 5, 0 )&#xd;&#xa;                )&#xd;&#xa;                label( &quot;&lt;html&gt;&lt;b&gt;${ BM.gtt( &apos;T_kbd_backspace&apos; ) }&lt;/b&gt; : ${ BM.gtt( &apos;T_delete_BM&apos; ) }&lt;/html&gt;&quot; )&#xd;&#xa;                label( &quot;&lt;html&gt;&lt;b&gt;${ BM.gtt( &apos;T_kbd_other&apos; ) }&lt;/b&gt; : ${ BM.gtt( &apos;T_replace_by_NBM&apos; ) }&lt;/html&gt;&quot; )&#xd;&#xa;            }&#xd;&#xa;            else if( isNamedBookmark )&#xd;&#xa;            {&#xd;&#xa;                label(&#xd;&#xa;                    text: BM.gtt( &apos;T_node_already_NBM&apos; ),&#xd;&#xa;                    foreground: blue,&#xd;&#xa;                    border: emptyBorder( 0, 0, 5, 0 )&#xd;&#xa;                )&#xd;&#xa;                label( &quot;&lt;html&gt;&lt;b&gt;${ BM.gtt( &apos;T_kbd_backspace&apos; ) }&lt;/b&gt; : ${ BM.gtt( &apos;T_delete_BM&apos; ) }&lt;/html&gt;&quot; )&#xd;&#xa;                label( &quot;&lt;html&gt;&lt;b&gt;${ BM.gtt( &apos;T_kbd_space&apos; ) }&lt;/b&gt; : ${ BM.gtt( &apos;T_replace_by_SBM&apos; ) }&lt;/html&gt;&quot; )&#xd;&#xa;                label( &quot;&lt;html&gt;&lt;b&gt;${ BM.gtt( &apos;T_kbd_other&apos; ) }&lt;/b&gt; : ${ BM.gtt( &apos;T_change_NBM_name&apos; ) }&lt;/html&gt;&quot; )&#xd;&#xa;            }&#xd;&#xa;            else&#xd;&#xa;            {&#xd;&#xa;                label( &quot;&lt;html&gt;&lt;b&gt;${ BM.gtt( &apos;T_kbd_space&apos; ) }&lt;/b&gt; : ${ BM.gtt( &apos;T_create_SBM&apos; ) }&lt;/html&gt;&quot; )&#xd;&#xa;                label( &quot;&lt;html&gt;&lt;b&gt;${ BM.gtt( &apos;T_kbd_other&apos; ) }&lt;/b&gt; : ${ BM.gtt( &apos;T_create_NBM&apos; ) }&lt;/html&gt;&quot; )&#xd;&#xa;            }&#xd;&#xa;            label( &quot;&lt;html&gt;&lt;b&gt;${ BM.gtt( &apos;T_kbd_esc&apos; ) }&lt;/b&gt; ${ BM.gtt( &apos;T_to_cancel&apos; ) }&lt;/html&gt;&quot; )&#xd;&#xa;        }&#xd;&#xa;&#xd;&#xa;        // Second panel : only if named bookmarks exists&#xd;&#xa;        if( namedBookmarks.size() &gt; 0 )&#xd;&#xa;        {&#xd;&#xa;            panel(&#xd;&#xa;                border:titledBorder( BM.gtt( &apos;T_NBM_are&apos; ) ),&#xd;&#xa;                constraints: BorderLayout.CENTER&#xd;&#xa;            ){&#xd;&#xa;                boxLayout( axis: BoxLayout.Y_AXIS )&#xd;&#xa;                namedBookmarks.each&#xd;&#xa;                {&#xd;&#xa;                    key, id -&gt;&#xd;&#xa;                    // Display a line of text with the associated key&#xd;&#xa;                    // and the 30 first caracters of the node&#xd;&#xa;                    def target = map.node( id )&#xd;&#xa;                    def text = target.text&#xd;&#xa;                    if( text.length() &gt; 30 ) text = text[0..27] + &quot;...&quot;&#xd;&#xa;                    text =&#xd;&#xa;                        &quot;&lt;html&gt;&lt;font color=&apos;red&apos;&gt;&lt;b&gt;&quot; +&#xd;&#xa;                        String.valueOf( (char) Integer.parseInt( key ) ) +&#xd;&#xa;                        &quot;&lt;/b&gt;&lt;/font&gt; : &quot; +&#xd;&#xa;                        text +&#xd;&#xa;                        &quot;&lt;/html&gt;&quot;&#xd;&#xa;                    if( id == node.id ) label( text: text, foreground: blue )&#xd;&#xa;                    else label( text )&#xd;&#xa;                }&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    }&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;// Create the response to the user key press&#xd;&#xa;gui.setFocusable(true)&#xd;&#xa;gui.addKeyListener(&#xd;&#xa;    new java.awt.event.KeyAdapter()&#xd;&#xa;    {&#xd;&#xa;        @Override&#xd;&#xa;        public void keyTyped(KeyEvent e)&#xd;&#xa;        {&#xd;&#xa;            // Get the key pressed&#xd;&#xa;            char chr = e.getKeyChar()&#xd;&#xa;            int keyCharCode = (int) chr&#xd;&#xa;&#xd;&#xa;            if( keyCharCode == 8 )&#xd;&#xa;            {&#xd;&#xa;                if( isNamedBookmark )&#xd;&#xa;                {&#xd;&#xa;                    namedBookmarks = BM.deleteNamedBookmark( node, namedBookmarks )&#xd;&#xa;                    gui.dispose()&#xd;&#xa;                    c.setStatusInfo( &apos;standard&apos;, BM.gtt( &apos;T_node_no_BM_anymore&apos; ), &apos;button_cancel&apos; )&#xd;&#xa;                }&#xd;&#xa;                else if( isAnonymousBookmark )&#xd;&#xa;                {&#xd;&#xa;                    BM.deleteAnonymousBookmark( node )&#xd;&#xa;                    gui.dispose()&#xd;&#xa;                    c.setStatusInfo( &apos;standard&apos;, BM.gtt( &apos;T_node_no_BM_anymore&apos; ), &apos;button_cancel&apos; )&#xd;&#xa;                }&#xd;&#xa;            }&#xd;&#xa;            else if( keyCharCode == 32 )&#xd;&#xa;            {&#xd;&#xa;                if( isNamedBookmark )&#xd;&#xa;                {&#xd;&#xa;                    namedBookmarks = BM.deleteNamedBookmark( node, namedBookmarks )&#xd;&#xa;                    namedBookmarks = BM.createAnonymousBookmark( node )&#xd;&#xa;                    gui.dispose()&#xd;&#xa;                    c.setStatusInfo( &apos;standard&apos;, BM.gtt( &apos;T_node_now_SBM&apos; ), &apos;button_ok&apos; )&#xd;&#xa;                }&#xd;&#xa;                else if( ! isAnonymousBookmark )&#xd;&#xa;                {&#xd;&#xa;                    BM.createAnonymousBookmark( node )&#xd;&#xa;                    gui.dispose()&#xd;&#xa;                    c.setStatusInfo( &apos;standard&apos;, BM.gtt( &apos;T_node_now_SBM&apos; ), &apos;button_ok&apos; )&#xd;&#xa;                }&#xd;&#xa;            }&#xd;&#xa;            else if( keyCharCode &gt; 32 &amp;&amp; keyCharCode != 127 &amp;&amp; keyCharCode &lt; 256 )&#xd;&#xa;            {&#xd;&#xa;                if( isAnonymousBookmark ) BM.deleteAnonymousBookmark( node )&#xd;&#xa;                namedBookmarks = BM.createNamedBookmark( node, keyCharCode, namedBookmarks )&#xd;&#xa;                gui.dispose()&#xd;&#xa;                c.setStatusInfo( &apos;standard&apos;, BM.gtt( &apos;T_node_now_NBM&apos; ) + &apos;&quot;&apos; + chr + &quot;&apos;&quot;, &apos;button_ok&apos; )&#xd;&#xa;            }&#xd;&#xa;            else if( keyCharCode == 27 )&#xd;&#xa;            {&#xd;&#xa;                c.setStatusInfo( &apos;standard&apos;, BM.gtt( &apos;T_BM_operation_aborded&apos; ), &apos;messagebox_warning&apos; )&#xd;&#xa;                gui.dispose()&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    }&#xd;&#xa;)&#xd;&#xa;&#xd;&#xa;// Center the gui over the freeplane window&#xd;&#xa;gui.setLocationRelativeTo( ui.frame )&#xd;&#xa;gui.visible = true&#xd;&#xa;&#xd;&#xa;" ID="ID_390979915" CREATED="1563126470085" MODIFIED="1563126470092"/>
</node>
<node TEXT="_20_ToggleBookmark.groovy" FOLDED="true" ID="ID_656120992" CREATED="1562410359736" MODIFIED="1562412173032">
<attribute_layout NAME_WIDTH="180.7499946132304 pt" VALUE_WIDTH="231.74999309331199 pt"/>
<attribute NAME="menuTitleKey" VALUE="addons.${name}._20_ToggleBookmark"/>
<attribute NAME="menuLocation" VALUE="/menu_bar/${name}"/>
<attribute NAME="executionMode" VALUE="on_single_node"/>
<attribute NAME="keyboardShortcut" VALUE=""/>
<attribute NAME="execute_scripts_without_asking" VALUE="true"/>
<attribute NAME="execute_scripts_without_file_restriction" VALUE="true"/>
<attribute NAME="execute_scripts_without_write_restriction" VALUE="false"/>
<attribute NAME="execute_scripts_without_exec_restriction" VALUE="false"/>
<attribute NAME="execute_scripts_without_network_restriction" VALUE="false"/>
<node TEXT="// Switch between named bookmark / anonymous bookmark / no bookmark for this node&#xd;&#xa;&#xd;&#xa;import bookmarks.Bookmarks as BM&#xd;&#xa;&#xd;&#xa;def namedBookmarks = BM.loadNamedBookmarks( node.map )&#xd;&#xa;namedBookmarks = BM.fixNamedBookmarksInconsistency( namedBookmarks, node.map )&#xd;&#xa;def isAnonymousBookmark = BM.isAnonymousBookmarked( node )&#xd;&#xa;def isNamedBookmark = BM.isNamedBookmarked( node, namedBookmarks )&#xd;&#xa;&#xd;&#xa;if( isNamedBookmark )&#xd;&#xa;{&#xd;&#xa;    // Remove the named bookmark and put a regular bookmark instead&#xd;&#xa;    BM.deleteNamedBookmark( node, namedBookmarks )&#xd;&#xa;    BM.createAnonymousBookmark( node )&#xd;&#xa;    c.setStatusInfo( &apos;standard&apos;, BM.gtt( &apos;T_node_now_SBM&apos; ), &apos;button_ok&apos; )&#xd;&#xa;}&#xd;&#xa;else if( isAnonymousBookmark )&#xd;&#xa;    {&#xd;&#xa;    // Remove the named bookmark&#xd;&#xa;    BM.deleteAnonymousBookmark( node )&#xd;&#xa;    c.setStatusInfo( &apos;standard&apos;, BM.gtt( &apos;T_node_no_BM_anymore&apos; ), &apos;button_cancel&apos; )&#xd;&#xa;}&#xd;&#xa;else&#xd;&#xa;    {&#xd;&#xa;    // Create a regular bookmark&#xd;&#xa;    BM.createAnonymousBookmark( node )&#xd;&#xa;    c.setStatusInfo( &apos;standard&apos;, BM.gtt( &apos;T_node_now_SBM&apos; ), &apos;button_ok&apos; )&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;" ID="ID_1229360525" CREATED="1563126470093" MODIFIED="1563126470094"/>
</node>
<node TEXT="_30_JumpToBookmark.groovy" FOLDED="true" ID="ID_1077199462" CREATED="1562410359734" MODIFIED="1562412168184">
<attribute_layout NAME_WIDTH="181.49999459087866 pt" VALUE_WIDTH="230.24999313801547 pt"/>
<attribute NAME="menuTitleKey" VALUE="addons.${name}._30_JumpToBookmark"/>
<attribute NAME="menuLocation" VALUE="/menu_bar/${name}"/>
<attribute NAME="executionMode" VALUE="on_single_node"/>
<attribute NAME="keyboardShortcut" VALUE=""/>
<attribute NAME="execute_scripts_without_asking" VALUE="true"/>
<attribute NAME="execute_scripts_without_file_restriction" VALUE="true"/>
<attribute NAME="execute_scripts_without_write_restriction" VALUE="false"/>
<attribute NAME="execute_scripts_without_exec_restriction" VALUE="false"/>
<attribute NAME="execute_scripts_without_network_restriction" VALUE="false"/>
<node TEXT="// Jump to a bookmark&#xd;&#xa;&#xd;&#xa;import groovy.swing.SwingBuilder&#xd;&#xa;import java.awt.BorderLayout&#xd;&#xa;import java.awt.Color&#xd;&#xa;import java.awt.Component&#xd;&#xa;import java.awt.FlowLayout&#xd;&#xa;import java.awt.GridBagConstraints&#xd;&#xa;import java.awt.Image&#xd;&#xa;import java.awt.KeyboardFocusManager&#xd;&#xa;import java.awt.event.*&#xd;&#xa;import javax.swing.AbstractAction&#xd;&#xa;import javax.swing.ActionMap&#xd;&#xa;import javax.swing.BoxLayout&#xd;&#xa;import javax.swing.ImageIcon&#xd;&#xa;import javax.swing.InputMap&#xd;&#xa;import javax.swing.JComponent&#xd;&#xa;import javax.swing.JFrame&#xd;&#xa;import javax.swing.JList&#xd;&#xa;import javax.swing.JPanel&#xd;&#xa;import javax.swing.KeyStroke&#xd;&#xa;import javax.swing.SwingConstants&#xd;&#xa;import javax.swing.UIManager&#xd;&#xa;import bookmarks.Bookmarks as BM&#xd;&#xa;&#xd;&#xa;map = node.map&#xd;&#xa;gui = null&#xd;&#xa;&#xd;&#xa;// Jump to a node after the gui close&#xd;&#xa;def jumpToNodeAfterGuiDispose( target, message )&#xd;&#xa;{&#xd;&#xa;    // If the code to jump to a node is executed before the gui close,&#xd;&#xa;    // it leave freeplane in a bad focus state.&#xd;&#xa;    // This is solved by putting this code in a listener executed&#xd;&#xa;    // after the gui destruction:&#xd;&#xa;    gui.addWindowListener(&#xd;&#xa;        new WindowAdapter()&#xd;&#xa;        {&#xd;&#xa;            @Override&#xd;&#xa;            public void windowClosed( WindowEvent event )&#xd;&#xa;            {&#xd;&#xa;                c.select(  target )&#xd;&#xa;                c.centerOnNode( target )&#xd;&#xa;                c.setStatusInfo( &apos;standard&apos;, message )&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    )&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;def JList getNamedBookmarksJList(&#xd;&#xa;    List bookmarks,         // List of the bookmarks&#xd;&#xa;    String currentNodeId&#xd;&#xa;){&#xd;&#xa;    if( ! bookmarks ) return null&#xd;&#xa;&#xd;&#xa;    // Create the component&#xd;&#xa;    JList component&#xd;&#xa;    SwingBuilder.build{&#xd;&#xa;        component = list(&#xd;&#xa;            items: bookmarks.collect&#xd;&#xa;            {&#xd;&#xa;                // Display for each bookmark the name of the bookmark,&#xd;&#xa;                // followed by the text of the node&#xd;&#xa;                if( it.id != currentNodeId ) &quot;&lt;html&gt;&lt;font color=&apos;red&apos;&gt;&lt;b&gt;&lt;i&gt;$it.name&lt;/i&gt;&lt;/b&gt;&lt;/font&gt; : $it.text&lt;/html&gt;&quot;&#xd;&#xa;                else &quot;&lt;html&gt;&lt;font color=&apos;red&apos;&gt;&lt;b&gt;&lt;i&gt;$it.name&lt;/i&gt;&lt;/b&gt;&lt;/font&gt;&lt;b&gt; : $it.text&lt;/b&gt;&lt;/html&gt;&quot;&#xd;&#xa;            },&#xd;&#xa;            visibleRowCount: Integer.min( 20, bookmarks.size() ),&#xd;&#xa;            border: emptyBorder( 5 )&#xd;&#xa;        )&#xd;&#xa;    }&#xd;&#xa;&#xd;&#xa;    // Initialize the component state&#xd;&#xa;    int selectedIdx = bookmarks.findIndexOf{ it.id == currentNodeId }&#xd;&#xa;    if( selectedIdx &lt; 0 ) selectedIdx = 0;&#xd;&#xa;    component.setSelectedIndex( selectedIdx )&#xd;&#xa;    component.ensureIndexIsVisible( selectedIdx )&#xd;&#xa;    &#xd;&#xa;    // Set the user interactions&#xd;&#xa;    &#xd;&#xa;    component.addKeyListener(&#xd;&#xa;        new KeyAdapter()&#xd;&#xa;        {&#xd;&#xa;            public void keyReleased( KeyEvent e )&#xd;&#xa;            {&#xd;&#xa;                int code = e.getKeyCode()&#xd;&#xa;                char chr = e.getKeyChar()&#xd;&#xa;                int idx = (int) chr&#xd;&#xa;                if( code == KeyEvent.VK_ENTER )&#xd;&#xa;                {&#xd;&#xa;                    int i = component.getSelectedIndex()&#xd;&#xa;                    if( i &gt;= 0 )&#xd;&#xa;                    {&#xd;&#xa;                        def bm = bookmarks[ i ]&#xd;&#xa;                        def target = map.node( bm.id )&#xd;&#xa;                        jumpToNodeAfterGuiDispose( target, &quot;${BM.gtt( &apos;T_jumped_to_NBM&apos; )} \&quot;$bm.name\&quot;&quot; )&#xd;&#xa;                        gui.dispose()&#xd;&#xa;                    }&#xd;&#xa;                }&#xd;&#xa;                else if( idx &gt; 32 &amp;&amp; idx != 127 &amp;&amp; idx &lt; 256 )&#xd;&#xa;                {&#xd;&#xa;                    // Try to jump to the corresponding node id&#xd;&#xa;                    String s = String.valueOf( chr )&#xd;&#xa;                    def bm = bookmarks.find{ it.name == s }&#xd;&#xa;                    if( bm )&#xd;&#xa;                    {&#xd;&#xa;                        def target = map.node( bm.id )&#xd;&#xa;                        jumpToNodeAfterGuiDispose( target, &quot;${BM.gtt( &apos;T_jumped_to_NBM&apos; )} \&quot;${s}\&quot;&quot; )&#xd;&#xa;                        gui.dispose()&#xd;&#xa;                    }&#xd;&#xa;                    else&#xd;&#xa;                    {&#xd;&#xa;                        c.setStatusInfo( &apos;standard&apos;, &quot;${BM.gtt( &apos;T_no_node_with_key&apos; )} \&quot;${chr}\&quot;&quot;, &quot;messagebox_warning&quot; )&#xd;&#xa;                    }&#xd;&#xa;                }&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    )&#xd;&#xa;    &#xd;&#xa;    component.addMouseListener(&#xd;&#xa;        new MouseAdapter()&#xd;&#xa;        {&#xd;&#xa;            @Override public void mouseClicked(MouseEvent e)&#xd;&#xa;            {&#xd;&#xa;                int idx = component.getSelectedIndex()&#xd;&#xa;                if( idx &gt;= 0 )&#xd;&#xa;                {&#xd;&#xa;                    def bm = bookmarks[ idx ]&#xd;&#xa;                    def target = node.map.node( bm.id )&#xd;&#xa;                    jumpToNodeAfterGuiDispose( target, &quot;${BM.gtt( &apos;T_jump_to_NBM&apos; )} \&quot;$bm.name\&quot;&quot; )&#xd;&#xa;                    gui.dispose()&#xd;&#xa;                }&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    )&#xd;&#xa;    &#xd;&#xa;    return component&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;// Create a JPanel for the named bookmarks&#xd;&#xa;def JPanel getNamedBookmarksJPanel(&#xd;&#xa;    List bookmarks,         // List of the bookmarks&#xd;&#xa;    JList bookmarksJList,   // Component that display this list&#xd;&#xa;    boolean showTabTip      // Do we need to add a comment about the Tab key ?&#xd;&#xa;){&#xd;&#xa;    if( ! bookmarks ) return null&#xd;&#xa;    &#xd;&#xa;    // List all the named bookmarks&#xd;&#xa;    JPanel jPane&#xd;&#xa;    SwingBuilder.build{&#xd;&#xa;        jPane = panel(&#xd;&#xa;            border: emptyBorder( [0,0,10,0] )&#xd;&#xa;        )&#xd;&#xa;        {&#xd;&#xa;            gridBagLayout()&#xd;&#xa;            // This gridbag will contains 4 items&#xd;&#xa;            // Row 0 : A label and a question mark label with a tooltip&#xd;&#xa;            // Row 1 : A label&#xd;&#xa;            // Row 2 : The kist of the named bookmarks&#xd;&#xa;&#xd;&#xa;            // Row 0&#xd;&#xa;            label(&#xd;&#xa;                &quot;${BM.gtt( &apos;T_select_NBM_to_jump&apos; )}.&quot;,&#xd;&#xa;                constraints: gbc( gridx:0, gridy:0, anchor:GridBagConstraints.LINE_START )&#xd;&#xa;            )&#xd;&#xa;            def icon = UIManager.getIcon(&quot;OptionPane.questionIcon&quot;)&#xd;&#xa;            Image img = icon.getImage()&#xd;&#xa;            int w = icon.getIconWidth() / 2&#xd;&#xa;            int h = icon.getIconHeight() / 2&#xd;&#xa;            def newimg = img.getScaledInstance( w, h, Image.SCALE_SMOOTH )&#xd;&#xa;            icon = new ImageIcon( newimg )&#xd;&#xa;            label(&#xd;&#xa;                icon: icon,&#xd;&#xa;                toolTipText:&#xd;&#xa;                    &quot;&quot;&quot;&lt;html&gt;&#xd;&#xa;                        ${ BM.gtt( &apos;T_tip_jump_to_NBM&apos; )}:&#xd;&#xa;                        &lt;ul&gt;&#xd;&#xa;                            &lt;li&gt;${BM.gtt( &apos;T_press_red_key&apos; )}&lt;/li&gt;&#xd;&#xa;                            &lt;li&gt;${BM.gtt( &apos;T_click_BM&apos; )}&lt;/li&gt;&#xd;&#xa;                            &lt;li&gt;${BM.gtt( &apos;T_arrow_select&apos; )}&lt;/li&gt;&#xd;&#xa;                        &lt;/ul&gt;&#xd;&#xa;                    &lt;/html&gt;&quot;&quot;&quot;,&#xd;&#xa;                constraints: gbc( gridx:1, gridy:0, anchor:GridBagConstraints.LINE_START, weightx:1, insets:[0,10,0,0] )&#xd;&#xa;            )&#xd;&#xa;&#xd;&#xa;            // Row 1&#xd;&#xa;            if( showTabTip ) label(&#xd;&#xa;                &quot;&lt;html&gt;${BM.gtt( &apos;T_tab_to_display_SBM&apos; )}.&lt;/html&gt;&quot;,&#xd;&#xa;                constraints: gbc( gridx:0, gridy:1, gridwidth:2, anchor:GridBagConstraints.LINE_START )&#xd;&#xa;            )&#xd;&#xa;&#xd;&#xa;            // Row 2&#xd;&#xa;            scrollPane(&#xd;&#xa;                border: emptyBorder( [10,0,0,0] ),&#xd;&#xa;                constraints: gbc( gridx:0, gridy:2, gridwidth:2, fill:GridBagConstraints.HORIZONTAL, anchor:GridBagConstraints.LINE_START )&#xd;&#xa;            )&#xd;&#xa;            {&#xd;&#xa;                widget( bookmarksJList )&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    }&#xd;&#xa;    &#xd;&#xa;    return jPane&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;def JList getAnonymousBookmarksJList(&#xd;&#xa;    List bookmarks,         // List of the bookmarks&#xd;&#xa;    String currentNodeId&#xd;&#xa;){&#xd;&#xa;    if( ! bookmarks ) return null&#xd;&#xa;&#xd;&#xa;    // Create the component&#xd;&#xa;    JList component&#xd;&#xa;    SwingBuilder.build{&#xd;&#xa;        component = list(&#xd;&#xa;            items: bookmarks.collect{&#xd;&#xa;                if( currentNodeId == it.id ) &quot;&lt;html&gt;&lt;b&gt;$it.text&lt;/b&gt;&lt;/html&gt;&quot;&#xd;&#xa;                else it.text&#xd;&#xa;            },&#xd;&#xa;            visibleRowCount: Integer.min( 20, bookmarks.size() )&#xd;&#xa;        )&#xd;&#xa;    }&#xd;&#xa;&#xd;&#xa;    // Initialize the component state&#xd;&#xa;    int selectedIdx = bookmarks.findIndexOf{ it.id == currentNodeId }&#xd;&#xa;    if( selectedIdx &lt; 0 ) selectedIdx = 0&#xd;&#xa;    component.setSelectedIndex( selectedIdx )&#xd;&#xa;    component.ensureIndexIsVisible( selectedIdx )&#xd;&#xa;&#xd;&#xa;    // Set the user interactions&#xd;&#xa;    component.addKeyListener(&#xd;&#xa;        new KeyAdapter()&#xd;&#xa;        {&#xd;&#xa;            @Override public void keyReleased(KeyEvent e)&#xd;&#xa;            {&#xd;&#xa;                int code = e.getKeyCode()&#xd;&#xa;                if( code == KeyEvent.VK_ENTER )&#xd;&#xa;                {&#xd;&#xa;                    int idx = component.getSelectedIndex()&#xd;&#xa;                    if( idx &gt;= 0 )&#xd;&#xa;                    {&#xd;&#xa;                        def bm = bookmarks[ idx ]&#xd;&#xa;                        def target = node.map.node( bm.id )&#xd;&#xa;                        jumpToNodeAfterGuiDispose( target, BM.gtt( &apos;T_jumped_to_SBM&apos; ) )&#xd;&#xa;                        gui.dispose()&#xd;&#xa;                    }&#xd;&#xa;                }&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    )&#xd;&#xa;        &#xd;&#xa;    component.addMouseListener(&#xd;&#xa;        new MouseAdapter()&#xd;&#xa;        {&#xd;&#xa;            @Override public void mouseClicked(MouseEvent e)&#xd;&#xa;            {&#xd;&#xa;                int idx = component.getSelectedIndex()&#xd;&#xa;                if( idx &gt;= 0 )&#xd;&#xa;                {&#xd;&#xa;                    def bm = bookmarks[ idx ]&#xd;&#xa;                    def target = node.map.node( bm.id )&#xd;&#xa;                    jumpToNodeAfterGuiDispose( target, BM.gtt( &apos;T_jumped_to_SBM&apos; ) )&#xd;&#xa;                    gui.dispose()&#xd;&#xa;                }&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    )&#xd;&#xa;&#xd;&#xa;    return component&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;// Create a JPanel for the anonymous bookmarks&#xd;&#xa;def JPanel getAnonymousBookmarksJPanel(&#xd;&#xa;    List bookmarks,         // List of the bookmarks&#xd;&#xa;    JList bookmarksJList,   // Component that display this list&#xd;&#xa;    boolean showTabTip      // Do we need to add a comment about the Tab key ?&#xd;&#xa;){&#xd;&#xa;    if( ! bookmarks ) return null&#xd;&#xa;    &#xd;&#xa;    // List all the named bookmarks&#xd;&#xa;    JPanel jPane&#xd;&#xa;    SwingBuilder.build{&#xd;&#xa;        jPane = panel(&#xd;&#xa;            border: emptyBorder( [0,0,10,0] )&#xd;&#xa;        )&#xd;&#xa;        {&#xd;&#xa;            gridBagLayout()&#xd;&#xa;            // This gridbag will contains 4 items&#xd;&#xa;            // Row 0 : A label and a question mark label with a tooltip&#xd;&#xa;            // Row 1 : A label&#xd;&#xa;            // Row 2 : The kist of the named bookmarks&#xd;&#xa;            &#xd;&#xa;            // Row 0&#xd;&#xa;            label(&#xd;&#xa;                &quot;${BM.gtt( &apos;T_select_BM_to_jump&apos; )}.&quot;,&#xd;&#xa;                constraints: gbc( gridx:0, gridy:0, anchor:GridBagConstraints.LINE_START )&#xd;&#xa;            )&#xd;&#xa;            def icon = UIManager.getIcon(&quot;OptionPane.questionIcon&quot;)&#xd;&#xa;            Image img = icon.getImage()&#xd;&#xa;            int w = icon.getIconWidth() / 2&#xd;&#xa;            int h = icon.getIconHeight() / 2&#xd;&#xa;            def newimg = img.getScaledInstance( w, h, Image.SCALE_SMOOTH )&#xd;&#xa;            icon = new ImageIcon( newimg )&#xd;&#xa;            label(&#xd;&#xa;                icon: icon,&#xd;&#xa;                toolTipText:&#xd;&#xa;                    &quot;&quot;&quot;&lt;html&gt;&#xd;&#xa;                        ${BM.gtt( &apos;T_tip_jump_to_SBM&apos; )}:&#xd;&#xa;                        &lt;ul&gt;&#xd;&#xa;                            &lt;li&gt;${BM.gtt( &apos;T_click_BM&apos; )}&lt;/li&gt;&#xd;&#xa;                            &lt;li&gt;${BM.gtt( &apos;T_arrow_select&apos; )}&lt;/li&gt;&#xd;&#xa;                        &lt;/ul&gt;&#xd;&#xa;                    &lt;/html&gt;&quot;&quot;&quot;,&#xd;&#xa;                constraints: gbc( gridx:1, gridy:0, anchor:GridBagConstraints.LINE_START, weightx:1, insets:[0,10,0,0] )&#xd;&#xa;            )&#xd;&#xa;            &#xd;&#xa;            // Row 1&#xd;&#xa;            if( showTabTip ) label(&#xd;&#xa;                &quot;&lt;html&gt;${BM.gtt( &apos;T_tab_to_display_NBM&apos; )}.&lt;/html&gt;&quot;,&#xd;&#xa;                constraints: gbc( gridx:0, gridy:1, gridwidth:2, anchor:GridBagConstraints.LINE_START )&#xd;&#xa;            )&#xd;&#xa;            &#xd;&#xa;            // Row 2&#xd;&#xa;            scrollPane(&#xd;&#xa;                border: emptyBorder( [10,0,0,0] ),&#xd;&#xa;                constraints: gbc( gridx:0, gridy:2, gridwidth:2, fill:GridBagConstraints.HORIZONTAL, anchor:GridBagConstraints.LINE_START )&#xd;&#xa;            )&#xd;&#xa;            {&#xd;&#xa;                widget( bookmarksJList )&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    }&#xd;&#xa;&#xd;&#xa;    return jPane&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;// Create the graphical user interface to display&#xd;&#xa;def createGui(&#xd;&#xa;    JPanel namedPanel, JList namedJList,&#xd;&#xa;    JPanel anonymPanel, JList anonymJList&#xd;&#xa;)&#xd;&#xa;{&#xd;&#xa;    def gui&#xd;&#xa;    SwingBuilder.build{&#xd;&#xa;        gui = dialog(&#xd;&#xa;            title: BM.gtt( &apos;T_jump_to_SBM&apos; ),&#xd;&#xa;            modal:true,&#xd;&#xa;            owner: ui.frame,&#xd;&#xa;            defaultCloseOperation: JFrame.DISPOSE_ON_CLOSE&#xd;&#xa;        ){&#xd;&#xa;            borderLayout()&#xd;&#xa;            // A panel for all the compontents (needed to add an inner padding)&#xd;&#xa;            panel(&#xd;&#xa;                border: emptyBorder( 10 ),&#xd;&#xa;                constraints: BorderLayout.PAGE_START&#xd;&#xa;            ){&#xd;&#xa;                borderLayout()&#xd;&#xa;&#xd;&#xa;                // First element of the main panel :&#xd;&#xa;                // A panel which can contains 2 panels:&#xd;&#xa;                // - one for the named bookmarks&#xd;&#xa;                // - one for the anonymous bookmarks&#xd;&#xa;                panel( constraints: BorderLayout.LINE_START )&#xd;&#xa;                {&#xd;&#xa;                    borderLayout()&#xd;&#xa;                    if( namedPanel ) widget( namedPanel, constraints: BorderLayout.PAGE_START )&#xd;&#xa;                    if( anonymPanel ) widget( anonymPanel, constraints: BorderLayout.PAGE_END )&#xd;&#xa;                }&#xd;&#xa;&#xd;&#xa;                // Second element of the main panel :&#xd;&#xa;                label( text: &quot;&lt;html&gt;${BM.gtt( &apos;T_press_esc_cancel&apos; )}&lt;/html&gt;.&quot;, constraints: BorderLayout.PAGE_END )&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    }&#xd;&#xa;&#xd;&#xa;    // Set Esc key to close the script&#xd;&#xa;    def onEscPressID = &quot;onEscPress&quot;&#xd;&#xa;    def inputMap = gui.getRootPane().getInputMap( JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT )&#xd;&#xa;    inputMap.put( KeyStroke.getKeyStroke( KeyEvent.VK_ESCAPE, 0 ), onEscPressID )&#xd;&#xa;    gui.getRootPane().getActionMap().put(&#xd;&#xa;        onEscPressID,&#xd;&#xa;        new AbstractAction()&#xd;&#xa;        {&#xd;&#xa;            @Override&#xd;&#xa;            public void actionPerformed( ActionEvent e )&#xd;&#xa;            {&#xd;&#xa;                gui.dispose()&#xd;&#xa;                c.setStatusInfo( &apos;standard&apos;, BM.gtt( &apos;T_jump_aborded&apos; ), &apos;button_cancel&apos; )&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    )&#xd;&#xa;&#xd;&#xa;    if( namedJList )&#xd;&#xa;    {&#xd;&#xa;        if( anonymPanel ) anonymPanel.visible = false&#xd;&#xa;        namedJList.requestFocus()&#xd;&#xa;    }&#xd;&#xa;    else if( anonymJList )&#xd;&#xa;    {&#xd;&#xa;        if( namedPanel ) namedPanel.visible = false&#xd;&#xa;        anonymJList.requestFocus()&#xd;&#xa;    }&#xd;&#xa;    &#xd;&#xa;    // Set the Tab key to switch between the 2 bookmarks types&#xd;&#xa;    if( namedPanel &amp;&amp; namedJList &amp;&amp; anonymPanel &amp;&amp; anonymJList )&#xd;&#xa;    {&#xd;&#xa;        namedJList.setFocusTraversalKeysEnabled( false )&#xd;&#xa;        anonymJList.setFocusTraversalKeysEnabled( false )&#xd;&#xa;        def onTabPressID = &quot;onTabPress&quot;&#xd;&#xa;        inputMap.put( KeyStroke.getKeyStroke( KeyEvent.VK_TAB, 0 ), onTabPressID )&#xd;&#xa;        gui.getRootPane().getActionMap().put(&#xd;&#xa;            onTabPressID,&#xd;&#xa;            new AbstractAction()&#xd;&#xa;            {&#xd;&#xa;                public void actionPerformed( ActionEvent e )&#xd;&#xa;                {&#xd;&#xa;                    if( namedPanel.visible )&#xd;&#xa;                    {&#xd;&#xa;                        namedPanel.visible = false&#xd;&#xa;                        anonymPanel.visible = true&#xd;&#xa;                        anonymJList.requestFocus()&#xd;&#xa;                    }&#xd;&#xa;                    else&#xd;&#xa;                    {&#xd;&#xa;                        namedPanel.visible = true&#xd;&#xa;                        anonymPanel.visible = false&#xd;&#xa;                        namedJList.requestFocus()&#xd;&#xa;                    }                &#xd;&#xa;                    gui.pack()&#xd;&#xa;                    gui.setLocationRelativeTo( ui.frame )&#xd;&#xa;                }&#xd;&#xa;            }&#xd;&#xa;        )&#xd;&#xa;    }&#xd;&#xa;&#xd;&#xa;    return gui&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;// Find all the bookmarks&#xd;&#xa;def namedBookmarks = BM.getAllNameBookmarkedNodes( map )&#xd;&#xa;def anonymousBookmarks = BM.getAllAnonymousBookmarkedNodes( map )&#xd;&#xa;&#xd;&#xa;// Quit the script if there is no bookmarks&#xd;&#xa;if( ! namedBookmarks &amp;&amp; ! anonymousBookmarks )&#xd;&#xa;{&#xd;&#xa;    ui.informationMessage( ui.frame, BM.gtt( &apos;T_no_bookmarks&apos; ) + &quot; !&quot;, BM.gtt( &apos;T_BM_win_title&apos; ) )&#xd;&#xa;    return&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;// Create the gui&#xd;&#xa;JList namedBookmarksJList = getNamedBookmarksJList( namedBookmarks, node.id )&#xd;&#xa;JPanel namedBookmarksJPanel = getNamedBookmarksJPanel(&#xd;&#xa;    namedBookmarks, namedBookmarksJList, (boolean)anonymousBookmarks&#xd;&#xa;)&#xd;&#xa;JList anonymousBookmarksJList = getAnonymousBookmarksJList( anonymousBookmarks, node.id )&#xd;&#xa;JPanel anonymousBookmarksJPanel = getAnonymousBookmarksJPanel(&#xd;&#xa;    anonymousBookmarks, anonymousBookmarksJList, (boolean)namedBookmarks&#xd;&#xa;)&#xd;&#xa;gui = createGui(&#xd;&#xa;    namedBookmarksJPanel, namedBookmarksJList,&#xd;&#xa;    anonymousBookmarksJPanel, anonymousBookmarksJList&#xd;&#xa;)&#xd;&#xa;&#xd;&#xa;// Center the gui over the freeplane window&#xd;&#xa;gui.pack()&#xd;&#xa;gui.setLocationRelativeTo( ui.frame )&#xd;&#xa;gui.visible = true&#xd;&#xa;&#xd;&#xa;" ID="ID_785059218" CREATED="1563126470095" MODIFIED="1563126470097"/>
</node>
<node TEXT="_35_JumpToPreviousBookmark.groovy" FOLDED="true" ID="ID_549813829" CREATED="1562533224958" MODIFIED="1562533329723">
<attribute_layout NAME_WIDTH="173.99999481439605 pt" VALUE_WIDTH="231.74999309331199 pt"/>
<attribute NAME="menuTitleKey" VALUE="addons.${name}._35_JumpToPreviousBookmark"/>
<attribute NAME="menuLocation" VALUE="/menu_bar/${name}"/>
<attribute NAME="executionMode" VALUE="on_single_node"/>
<attribute NAME="keyboardShortcut" VALUE=""/>
<attribute NAME="execute_scripts_without_asking" VALUE="true"/>
<attribute NAME="execute_scripts_without_file_restriction" VALUE="true"/>
<attribute NAME="execute_scripts_without_write_restriction" VALUE="false"/>
<attribute NAME="execute_scripts_without_exec_restriction" VALUE="false"/>
<attribute NAME="execute_scripts_without_network_restriction" VALUE="false"/>
<node TEXT="// Jump to previous bookmark&#xd;&#xa;&#xd;&#xa;import bookmarks.Bookmarks as BM&#xd;&#xa;&#xd;&#xa;def namedBookmarks = BM.loadNamedBookmarks( node.map )&#xd;&#xa;&#xd;&#xa;def start = node&#xd;&#xa;n = node.getPrevious()&#xd;&#xa;while( n != start &amp;&amp; ! BM.isBookmarked( n, namedBookmarks ) ) n = n.getPrevious()&#xd;&#xa;&#xd;&#xa;if( n != start &amp;&amp; BM.isBookmarked( n, namedBookmarks ) )&#xd;&#xa;{&#xd;&#xa;    c.select( n  )&#xd;&#xa;    c.centerOnNode( n )&#xd;&#xa;}&#xd;&#xa;else&#xd;&#xa;{&#xd;&#xa;    c.setStatusInfo( &apos;standard&apos;, BM.gtt( &apos;T_no_prev_BM&apos; ) + &quot; !&quot;, &apos;messagebox_warning&apos; )&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;" ID="ID_1875540562" CREATED="1563126470098" MODIFIED="1563126470098"/>
</node>
<node TEXT="_36_JumpToNextBookmark.groovy" FOLDED="true" ID="ID_486794651" CREATED="1562533224860" MODIFIED="1562533311755">
<attribute_layout NAME_WIDTH="180.7499946132304 pt" VALUE_WIDTH="224.99999329447766 pt"/>
<attribute NAME="menuTitleKey" VALUE="addons.${name}._36_JumpToNextBookmark"/>
<attribute NAME="menuLocation" VALUE="/menu_bar/${name}"/>
<attribute NAME="executionMode" VALUE="on_single_node"/>
<attribute NAME="keyboardShortcut" VALUE=""/>
<attribute NAME="execute_scripts_without_asking" VALUE="true"/>
<attribute NAME="execute_scripts_without_file_restriction" VALUE="true"/>
<attribute NAME="execute_scripts_without_write_restriction" VALUE="false"/>
<attribute NAME="execute_scripts_without_exec_restriction" VALUE="false"/>
<attribute NAME="execute_scripts_without_network_restriction" VALUE="false"/>
<node TEXT="// Jump to next bookmark&#xd;&#xa;&#xd;&#xa;import bookmarks.Bookmarks as BM&#xd;&#xa;&#xd;&#xa;def namedBookmarks = BM.loadNamedBookmarks( node.map )&#xd;&#xa;&#xd;&#xa;def start = node&#xd;&#xa;n = node.getNext()&#xd;&#xa;while( n != start &amp;&amp; ! BM.isBookmarked( n, namedBookmarks ) ) n = n.getNext()&#xd;&#xa;&#xd;&#xa;if( n != start &amp;&amp; BM.isBookmarked( n, namedBookmarks ) )&#xd;&#xa;{&#xd;&#xa;    c.select( n  )&#xd;&#xa;    c.centerOnNode( n )&#xd;&#xa;}&#xd;&#xa;else&#xd;&#xa;{&#xd;&#xa;    c.setStatusInfo( &apos;standard&apos;, BM.gtt( &apos;T_no_next_BM&apos; ) + &quot; !&quot;, &apos;messagebox_warning&apos; )&#xd;&#xa;}&#xd;&#xa;" ID="ID_391793690" CREATED="1563126470099" MODIFIED="1563126470099"/>
</node>
<node TEXT="_50_CreateLinkInBookmark.groovy" FOLDED="true" ID="ID_331545763" CREATED="1562412710758" MODIFIED="1562534572812">
<attribute_layout NAME_WIDTH="182.24999456852692 pt" VALUE_WIDTH="241.49999280273937 pt"/>
<attribute NAME="menuTitleKey" VALUE="addons.${name}._50_CreateLinkInBookmark"/>
<attribute NAME="menuLocation" VALUE="/menu_bar/${name}/_50_bookmarksLinks"/>
<attribute NAME="executionMode" VALUE="on_single_node"/>
<attribute NAME="keyboardShortcut" VALUE=""/>
<attribute NAME="execute_scripts_without_asking" VALUE="true"/>
<attribute NAME="execute_scripts_without_file_restriction" VALUE="true"/>
<attribute NAME="execute_scripts_without_write_restriction" VALUE="false"/>
<attribute NAME="execute_scripts_without_exec_restriction" VALUE="false"/>
<attribute NAME="execute_scripts_without_network_restriction" VALUE="false"/>
<node TEXT="// Create a link to this node.&#xd;&#xa;// The node where the link is created is a bookmark, or the memorized node if it exists.&#xd;&#xa;&#xd;&#xa;import groovy.swing.SwingBuilder&#xd;&#xa;import java.awt.BorderLayout&#xd;&#xa;import java.awt.Color&#xd;&#xa;import java.awt.Component&#xd;&#xa;import java.awt.FlowLayout&#xd;&#xa;import java.awt.GridBagConstraints&#xd;&#xa;import java.awt.Image&#xd;&#xa;import java.awt.KeyboardFocusManager&#xd;&#xa;import java.awt.event.*&#xd;&#xa;import javax.swing.AbstractAction&#xd;&#xa;import javax.swing.ActionMap&#xd;&#xa;import javax.swing.BoxLayout&#xd;&#xa;import javax.swing.ImageIcon&#xd;&#xa;import javax.swing.InputMap&#xd;&#xa;import javax.swing.JComponent&#xd;&#xa;import javax.swing.JFrame&#xd;&#xa;import javax.swing.JList&#xd;&#xa;import javax.swing.JPanel&#xd;&#xa;import javax.swing.KeyStroke&#xd;&#xa;import javax.swing.SwingConstants&#xd;&#xa;import javax.swing.UIManager&#xd;&#xa;import org.freeplane.plugin.script.proxy.Convertible&#xd;&#xa;import org.freeplane.features.link.LinkController&#xd;&#xa;import org.freeplane.features.link.mindmapmode.MLinkController&#xd;&#xa;import bookmarks.Bookmarks as BM&#xd;&#xa;&#xd;&#xa;map = node.map&#xd;&#xa;gui = null&#xd;&#xa;&#xd;&#xa;// Create a link to another node in a node&#xd;&#xa;def createLink( src, dst, message )&#xd;&#xa;{&#xd;&#xa;    dst.link.node = src&#xd;&#xa;    c.setStatusInfo( &apos;standard&apos;, message, &apos;button_ok&apos; )&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;def JList getNamedBookmarksJList( List bookmarks )&#xd;&#xa;{&#xd;&#xa;    if( ! bookmarks ) return null&#xd;&#xa;&#xd;&#xa;    // Create the component&#xd;&#xa;    JList component&#xd;&#xa;    SwingBuilder.build{&#xd;&#xa;        component = list(&#xd;&#xa;            items: bookmarks.collect&#xd;&#xa;            {&#xd;&#xa;                // Display for each bookmark the name of the bookmark,&#xd;&#xa;                // followed by the text of the node&#xd;&#xa;                &quot;&lt;html&gt;&lt;font color=&apos;red&apos;&gt;&lt;b&gt;&lt;i&gt;$it.name&lt;/i&gt;&lt;/b&gt;&lt;/font&gt; : $it.text&lt;/html&gt;&quot;&#xd;&#xa;            },&#xd;&#xa;            visibleRowCount: Integer.min( 20, bookmarks.size() ),&#xd;&#xa;            border: emptyBorder( 5 )&#xd;&#xa;        )&#xd;&#xa;    }&#xd;&#xa;    component.setSelectedIndex( 0 )&#xd;&#xa;    &#xd;&#xa;    // Set the user interactions&#xd;&#xa;    &#xd;&#xa;    component.addKeyListener(&#xd;&#xa;        new KeyAdapter()&#xd;&#xa;        {&#xd;&#xa;            public void keyReleased( KeyEvent e )&#xd;&#xa;            {&#xd;&#xa;                int code = e.getKeyCode()&#xd;&#xa;                char chr = e.getKeyChar()&#xd;&#xa;                int idx = (int) chr&#xd;&#xa;                if( code == KeyEvent.VK_ENTER )&#xd;&#xa;                {&#xd;&#xa;                    int i = component.getSelectedIndex()&#xd;&#xa;                    if( i &gt;= 0 )&#xd;&#xa;                    {&#xd;&#xa;                        def bm = bookmarks[ i ]&#xd;&#xa;                        def target = map.node( bm.id )&#xd;&#xa;                        createLink( node, target, &quot;${BM.gtt( &apos;T_created_link_in_NBM&apos; )} \&quot;$bm.name\&quot;&quot; )&#xd;&#xa;                        gui.dispose()&#xd;&#xa;                    }&#xd;&#xa;                }&#xd;&#xa;                else if( idx &gt; 32 &amp;&amp; idx != 127 &amp;&amp; idx &lt; 256 )&#xd;&#xa;                {&#xd;&#xa;                    // Try to link to the corresponding node id&#xd;&#xa;                    String s = String.valueOf( chr )&#xd;&#xa;                    def bm = bookmarks.find{ it.name == s }&#xd;&#xa;                    if( bm )&#xd;&#xa;                    {&#xd;&#xa;                        def target = map.node( bm.id )&#xd;&#xa;                        createLink( node, target, &quot;${BM.gtt( &apos;T_created_link_in_NBM&apos; )} \&quot;${s}\&quot;&quot; )&#xd;&#xa;                        gui.dispose()&#xd;&#xa;                    }&#xd;&#xa;                    else&#xd;&#xa;                    {&#xd;&#xa;                        c.setStatusInfo( &apos;standard&apos;, &quot;${BM.gtt( &apos;T_no_node_with_key&apos; )} \&quot;${chr}\&quot;&quot;, &apos;messagebox_warning&apos; )&#xd;&#xa;                    }&#xd;&#xa;                }&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    )&#xd;&#xa;    &#xd;&#xa;    component.addMouseListener(&#xd;&#xa;        new MouseAdapter()&#xd;&#xa;        {&#xd;&#xa;            @Override public void mouseClicked(MouseEvent e)&#xd;&#xa;            {&#xd;&#xa;                int idx = component.getSelectedIndex()&#xd;&#xa;                if( idx &gt;= 0 )&#xd;&#xa;                {&#xd;&#xa;                    def bm = bookmarks[ idx ]&#xd;&#xa;                    def target = node.map.node( bm.id )&#xd;&#xa;                    createLink( node, target, &quot;${BM.gtt( &apos;T_created_link_in_NBM&apos; )} \&quot;$bm.name\&quot;&quot; )&#xd;&#xa;                    gui.dispose()&#xd;&#xa;                }&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    )&#xd;&#xa;    &#xd;&#xa;    return component&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;// Create a JPanel for the named bookmarks&#xd;&#xa;def JPanel getNamedBookmarksJPanel(&#xd;&#xa;    List bookmarks,         // List of the bookmarks&#xd;&#xa;    JList bookmarksJList,   // Component that display this list&#xd;&#xa;    boolean showTabTip      // Do we need to add a comment about the Tab key ?&#xd;&#xa;){&#xd;&#xa;    if( ! bookmarks ) return null&#xd;&#xa;    &#xd;&#xa;    // List all the named bookmarks&#xd;&#xa;    JPanel jPane&#xd;&#xa;    SwingBuilder.build{&#xd;&#xa;        jPane = panel(&#xd;&#xa;            border: emptyBorder( [0,0,10,0] )&#xd;&#xa;        )&#xd;&#xa;        {&#xd;&#xa;            gridBagLayout()&#xd;&#xa;            // This gridbag will contains 4 items&#xd;&#xa;            // Row 0 : A label&#xd;&#xa;            // Row 1 : A label and a question mark label with a tooltip&#xd;&#xa;            // Row 2 : A label&#xd;&#xa;            // Row 3 : The list of the named bookmarks&#xd;&#xa;&#xd;&#xa;            // Row 0&#xd;&#xa;            label(&#xd;&#xa;                &quot;${BM.gtt( &apos;T_create_link_in&apos; )}.&quot;,&#xd;&#xa;                constraints: gbc( gridx:0, gridy:0, anchor:GridBagConstraints.LINE_START )&#xd;&#xa;            )&#xd;&#xa;&#xd;&#xa;            // Row 1&#xd;&#xa;            label(&#xd;&#xa;                &quot;${BM.gtt( &apos;T_select_node_to_link_in&apos; )}.&quot;,&#xd;&#xa;                constraints: gbc( gridx:0, gridy:1, anchor:GridBagConstraints.LINE_START )&#xd;&#xa;            )&#xd;&#xa;            def icon = UIManager.getIcon(&quot;OptionPane.questionIcon&quot;)&#xd;&#xa;            Image img = icon.getImage()&#xd;&#xa;            int w = icon.getIconWidth() / 2&#xd;&#xa;            int h = icon.getIconHeight() / 2&#xd;&#xa;            def newimg = img.getScaledInstance( w, h, Image.SCALE_SMOOTH )&#xd;&#xa;            icon = new ImageIcon( newimg )&#xd;&#xa;            label(&#xd;&#xa;                icon: icon,&#xd;&#xa;                toolTipText:&#xd;&#xa;                    &quot;&quot;&quot;&lt;html&gt;&#xd;&#xa;                        ${BM.gtt( &apos;T_tip_create_link_in_NBM&apos; )}:&#xd;&#xa;                        &lt;ul&gt;&#xd;&#xa;                            &lt;li&gt;${BM.gtt( &apos;T_press_red_key&apos; )}&lt;/li&gt;&#xd;&#xa;                            &lt;li&gt;${BM.gtt( &apos;T_click_BM&apos; )}&lt;/li&gt;&#xd;&#xa;                            &lt;li&gt;${BM.gtt( &apos;T_arrow_select&apos; )}&lt;/li&gt;&#xd;&#xa;                        &lt;/ul&gt;&#xd;&#xa;                    &lt;/html&gt;&quot;&quot;&quot;,&#xd;&#xa;                constraints: gbc( gridx:1, gridy:1, anchor:GridBagConstraints.LINE_START, weightx:1, insets:[0,10,0,0] )&#xd;&#xa;            )&#xd;&#xa;&#xd;&#xa;            // Row 2&#xd;&#xa;            if( showTabTip ) label(&#xd;&#xa;                &quot;&lt;html&gt;${BM.gtt( &apos;T_tab_to_display_SBM&apos; )}.&lt;/html&gt;&quot;,&#xd;&#xa;                constraints: gbc( gridx:0, gridy:2, gridwidth:2, anchor:GridBagConstraints.LINE_START )&#xd;&#xa;            )&#xd;&#xa;&#xd;&#xa;            // Row 3&#xd;&#xa;            scrollPane(&#xd;&#xa;                border: emptyBorder( [10,0,0,0] ),&#xd;&#xa;                constraints: gbc( gridx:0, gridy:3, gridwidth:2, fill:GridBagConstraints.HORIZONTAL, anchor:GridBagConstraints.LINE_START )&#xd;&#xa;            )&#xd;&#xa;            {&#xd;&#xa;                widget( bookmarksJList )&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    }&#xd;&#xa;    &#xd;&#xa;    return jPane&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;def JList getAnonymousBookmarksJList( List bookmarks )&#xd;&#xa;{&#xd;&#xa;    if( ! bookmarks ) return null&#xd;&#xa;&#xd;&#xa;    // Create the component&#xd;&#xa;    JList component&#xd;&#xa;    SwingBuilder.build{&#xd;&#xa;        component = list(&#xd;&#xa;            items: bookmarks.collect{ it.text },&#xd;&#xa;            visibleRowCount: Integer.min( 20, bookmarks.size() )&#xd;&#xa;        )&#xd;&#xa;    }&#xd;&#xa;    component.setSelectedIndex( 0 )&#xd;&#xa;&#xd;&#xa;    // Set the user interactions&#xd;&#xa;    component.addKeyListener(&#xd;&#xa;        new KeyAdapter()&#xd;&#xa;        {&#xd;&#xa;            @Override public void keyReleased(KeyEvent e)&#xd;&#xa;            {&#xd;&#xa;                int code = e.getKeyCode()&#xd;&#xa;                if( code == KeyEvent.VK_ENTER )&#xd;&#xa;                {&#xd;&#xa;                    int idx = component.getSelectedIndex()&#xd;&#xa;                    if( idx &gt;= 0 )&#xd;&#xa;                    {&#xd;&#xa;                        def bm = bookmarks[ idx ]&#xd;&#xa;                        def target = node.map.node( bm.id )&#xd;&#xa;                        createLink( node, target, BM.gtt( &apos;T_created_link_in_SBM&apos; ) )&#xd;&#xa;                        gui.dispose()&#xd;&#xa;                    }&#xd;&#xa;                }&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    )&#xd;&#xa;        &#xd;&#xa;    component.addMouseListener(&#xd;&#xa;        new MouseAdapter()&#xd;&#xa;        {&#xd;&#xa;            @Override public void mouseClicked(MouseEvent e)&#xd;&#xa;            {&#xd;&#xa;                int idx = component.getSelectedIndex()&#xd;&#xa;                if( idx &gt;= 0 )&#xd;&#xa;                {&#xd;&#xa;                    def bm = bookmarks[ idx ]&#xd;&#xa;                    def target = node.map.node( bm.id )&#xd;&#xa;                    createLink( node, target, BM.gtt( &apos;T_created_link_in_SBM&apos; ) )&#xd;&#xa;                    gui.dispose()&#xd;&#xa;                }&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    )&#xd;&#xa;&#xd;&#xa;    return component&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;// Create a JPanel for the anonymous bookmarks&#xd;&#xa;def JPanel getAnonymousBookmarksJPanel(&#xd;&#xa;    List bookmarks,         // List of the bookmarks&#xd;&#xa;    JList bookmarksJList,   // Component that display this list&#xd;&#xa;    boolean showTabTip      // Do we need to add a comment about the Tab key ?&#xd;&#xa;){&#xd;&#xa;    if( ! bookmarks ) return null&#xd;&#xa;    &#xd;&#xa;    // List all the named bookmarks&#xd;&#xa;    JPanel jPane&#xd;&#xa;    SwingBuilder.build{&#xd;&#xa;        jPane = panel(&#xd;&#xa;            border: emptyBorder( [0,0,10,0] )&#xd;&#xa;        )&#xd;&#xa;        {&#xd;&#xa;            gridBagLayout()&#xd;&#xa;            // This gridbag will contains 4 items&#xd;&#xa;            // Row 0 : A label&#xd;&#xa;            // Row 1 : A label and a question mark label with a tooltip&#xd;&#xa;            // Row 2 : A label&#xd;&#xa;            // Row 3 : The list of the named bookmarks&#xd;&#xa;&#xd;&#xa;            // Row 0&#xd;&#xa;            label(&#xd;&#xa;                &quot;${BM.gtt( &apos;T_create_link_to&apos; )}.&quot;,&#xd;&#xa;                constraints: gbc( gridx:0, gridy:0, anchor:GridBagConstraints.LINE_START )&#xd;&#xa;            )&#xd;&#xa;            &#xd;&#xa;            // Row 1&#xd;&#xa;            label(&#xd;&#xa;                &quot;${BM.gtt( &apos;T_select_BM_to_link_in&apos; )}.&quot;,&#xd;&#xa;                constraints: gbc( gridx:0, gridy:1, anchor:GridBagConstraints.LINE_START )&#xd;&#xa;            )&#xd;&#xa;            def icon = UIManager.getIcon(&quot;OptionPane.questionIcon&quot;)&#xd;&#xa;            Image img = icon.getImage()&#xd;&#xa;            int w = icon.getIconWidth() / 2&#xd;&#xa;            int h = icon.getIconHeight() / 2&#xd;&#xa;            def newimg = img.getScaledInstance( w, h, Image.SCALE_SMOOTH )&#xd;&#xa;            icon = new ImageIcon( newimg )&#xd;&#xa;            label(&#xd;&#xa;                icon: icon,&#xd;&#xa;                toolTipText:&#xd;&#xa;                    &quot;&quot;&quot;&lt;html&gt;&#xd;&#xa;                        ${BM.gtt( &apos;T_tip_create_link_in_SBM&apos; )}:&#xd;&#xa;                        &lt;ul&gt;&#xd;&#xa;                            &lt;li&gt;${BM.gtt( &apos;T_click_BM&apos; )}&lt;/li&gt;&#xd;&#xa;                            &lt;li&gt;${BM.gtt( &apos;T_arrow_select&apos; )}&lt;/li&gt;&#xd;&#xa;                        &lt;/ul&gt;&#xd;&#xa;                    &lt;/html&gt;&quot;&quot;&quot;,&#xd;&#xa;                constraints: gbc( gridx:1, gridy:1, anchor:GridBagConstraints.LINE_START, weightx:1, insets:[0,10,0,0] )&#xd;&#xa;            )&#xd;&#xa;            &#xd;&#xa;            // Row 2&#xd;&#xa;            if( showTabTip ) label(&#xd;&#xa;                &quot;&lt;html&gt;${BM.gtt( &apos;T_tab_to_display_NBM&apos; )}.&lt;/html&gt;&quot;,&#xd;&#xa;                constraints: gbc( gridx:0, gridy:2, gridwidth:2, anchor:GridBagConstraints.LINE_START )&#xd;&#xa;            )&#xd;&#xa;            &#xd;&#xa;            // Row 3&#xd;&#xa;            scrollPane(&#xd;&#xa;                border: emptyBorder( [10,0,0,0] ),&#xd;&#xa;                constraints: gbc( gridx:0, gridy:3, gridwidth:2, fill:GridBagConstraints.HORIZONTAL, anchor:GridBagConstraints.LINE_START )&#xd;&#xa;            )&#xd;&#xa;            {&#xd;&#xa;                widget( bookmarksJList )&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    }&#xd;&#xa;&#xd;&#xa;    return jPane&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;// Create the graphical user interface to display&#xd;&#xa;def createGui(&#xd;&#xa;    JPanel namedPanel, JList namedJList,&#xd;&#xa;    JPanel anonymPanel, JList anonymJList&#xd;&#xa;)&#xd;&#xa;{&#xd;&#xa;    def memorizedNodeID = ((MLinkController)(LinkController.getController())).getAnchorID()&#xd;&#xa;&#xd;&#xa;    def gui&#xd;&#xa;    SwingBuilder.build{&#xd;&#xa;        gui = dialog(&#xd;&#xa;            title: BM.gtt( &apos;T_create_link_in_win_title&apos; ),&#xd;&#xa;            modal:true,&#xd;&#xa;            owner: ui.frame,&#xd;&#xa;            defaultCloseOperation: JFrame.DISPOSE_ON_CLOSE&#xd;&#xa;        ){&#xd;&#xa;            borderLayout()&#xd;&#xa;            // A panel for all the compontents (needed to add an inner padding)&#xd;&#xa;            panel(&#xd;&#xa;                border: emptyBorder( 10 ),&#xd;&#xa;                constraints: BorderLayout.PAGE_START&#xd;&#xa;            ){&#xd;&#xa;                borderLayout()&#xd;&#xa;&#xd;&#xa;                // First element of the main panel :&#xd;&#xa;                // A panel which can contains 2 panels:&#xd;&#xa;                // - one for the named bookmarks&#xd;&#xa;                // - one for the anonymous bookmarks&#xd;&#xa;                panel( constraints: BorderLayout.LINE_START )&#xd;&#xa;                {&#xd;&#xa;                    borderLayout()&#xd;&#xa;                    if( namedPanel ) widget( namedPanel, constraints: BorderLayout.PAGE_START )&#xd;&#xa;                    if( anonymPanel ) widget( anonymPanel, constraints: BorderLayout.PAGE_END )&#xd;&#xa;                }&#xd;&#xa;&#xd;&#xa;                // Second element of the main panel :&#xd;&#xa;                vbox( constraints: BorderLayout.PAGE_END)&#xd;&#xa;                {&#xd;&#xa;                    if( memorizedNodeID ) label( text: &quot;&lt;html&gt;${BM.gtt( &apos;T_space_to_link_in_memorized&apos; )}.&lt;/html&gt;&quot; )&#xd;&#xa;                    label( text: &quot;&lt;html&gt;${BM.gtt( &apos;T_press_esc_cancel&apos; )}.&lt;/html&gt;&quot; )&#xd;&#xa;                }&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    }&#xd;&#xa;&#xd;&#xa;    // Set Esc key to close the script&#xd;&#xa;    def onEscPressID = &quot;onEscPress&quot;&#xd;&#xa;    def inputMap = gui.getRootPane().getInputMap( JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT )&#xd;&#xa;    inputMap.put( KeyStroke.getKeyStroke( KeyEvent.VK_ESCAPE, 0 ), onEscPressID )&#xd;&#xa;    gui.getRootPane().getActionMap().put(&#xd;&#xa;        onEscPressID,&#xd;&#xa;        new AbstractAction()&#xd;&#xa;        {&#xd;&#xa;&#x9;        @Override&#xd;&#xa;&#x9;        public void actionPerformed( ActionEvent e )&#xd;&#xa;            {&#xd;&#xa;&#x9;            gui.dispose()&#xd;&#xa;                c.setStatusInfo( &apos;standard&apos;, BM.gtt( &apos;T_link_aborded&apos; ), &apos;button_cancel&apos; )&#xd;&#xa;&#x9;        }&#xd;&#xa;        }&#xd;&#xa;    )&#xd;&#xa;&#xd;&#xa;    if( memorizedNodeID )&#xd;&#xa;    { &#xd;&#xa;        // Set Space key to create the link to the standard freeplane memorized node&#xd;&#xa;        def onSpacePressID = &quot;onSpacePress&quot;&#xd;&#xa;        spaceStroke = KeyStroke.getKeyStroke( KeyEvent.VK_SPACE, 0 )&#xd;&#xa;        inputMap.put( spaceStroke, onSpacePressID )&#xd;&#xa;        gui.getRootPane().getActionMap().put(&#xd;&#xa;            onSpacePressID,&#xd;&#xa;            new AbstractAction()&#xd;&#xa;            {&#xd;&#xa;&#x9;            @Override&#xd;&#xa;&#x9;            public void actionPerformed( ActionEvent e )&#xd;&#xa;                {&#xd;&#xa;&#x9;                menuUtils.executeMenuItems( [ &apos;MakeLinkFromAnchorAction&apos; ] )&#xd;&#xa;                    gui.dispose()&#xd;&#xa;&#x9;            }&#xd;&#xa;            }&#xd;&#xa;        )&#xd;&#xa;        if( namedJList ) namedJList.getInputMap().put( spaceStroke, &quot;none&quot; )&#xd;&#xa;        if( anonymJList ) anonymJList.getInputMap().put( spaceStroke, &quot;none&quot; )&#xd;&#xa;    }&#xd;&#xa;&#xd;&#xa;    if( namedJList )&#xd;&#xa;    {&#xd;&#xa;        if( anonymPanel ) anonymPanel.visible = false&#xd;&#xa;        namedJList.requestFocus()&#xd;&#xa;    }&#xd;&#xa;    else if( anonymJList )&#xd;&#xa;    {&#xd;&#xa;        if( namedPanel ) namedPanel.visible = false&#xd;&#xa;        anonymJList.requestFocus()&#xd;&#xa;    }&#xd;&#xa;    &#xd;&#xa;    // Set the Tab key to switch between the 2 bookmarks types&#xd;&#xa;    if( namedPanel &amp;&amp; namedJList &amp;&amp; anonymPanel &amp;&amp; anonymJList )&#xd;&#xa;    {&#xd;&#xa;        namedJList.setFocusTraversalKeysEnabled( false )&#xd;&#xa;        anonymJList.setFocusTraversalKeysEnabled( false )&#xd;&#xa;        def onTabPressID = &quot;onTabPress&quot;&#xd;&#xa;        inputMap.put( KeyStroke.getKeyStroke( KeyEvent.VK_TAB, 0 ), onTabPressID )&#xd;&#xa;        gui.getRootPane().getActionMap().put(&#xd;&#xa;            onTabPressID,&#xd;&#xa;            new AbstractAction()&#xd;&#xa;            {&#xd;&#xa;                public void actionPerformed( ActionEvent e )&#xd;&#xa;                {&#xd;&#xa;                    if( namedPanel.visible )&#xd;&#xa;                    {&#xd;&#xa;                        namedPanel.visible = false&#xd;&#xa;                        anonymPanel.visible = true&#xd;&#xa;                        anonymJList.requestFocus()&#xd;&#xa;                    }&#xd;&#xa;                    else&#xd;&#xa;                    {&#xd;&#xa;                        namedPanel.visible = true&#xd;&#xa;                        anonymPanel.visible = false&#xd;&#xa;                        namedJList.requestFocus()&#xd;&#xa;                    }                &#xd;&#xa;                    gui.pack()&#xd;&#xa;                    gui.setLocationRelativeTo( ui.frame )&#xd;&#xa;                }&#xd;&#xa;            }&#xd;&#xa;        )&#xd;&#xa;    }&#xd;&#xa;&#xd;&#xa;    return gui&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;// Find all the bookmarks&#xd;&#xa;def namedBookmarks = BM.getAllNameBookmarkedNodes( map, [ node.id ] )&#xd;&#xa;def anonymousBookmarks = BM.getAllAnonymousBookmarkedNodes( map, [ node.id ] )&#xd;&#xa;&#xd;&#xa;// Quit the script if there is no bookmarks&#xd;&#xa;if( ! namedBookmarks &amp;&amp; ! anonymousBookmarks )&#xd;&#xa;{&#xd;&#xa;    ui.informationMessage( ui.frame, &quot;${BM.gtt( &apos;T_no_bookmarks&apos; )} !&quot;, BM.gtt( &apos;T_BM_win_title&apos; ) )&#xd;&#xa;    return&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;// Create the gui&#xd;&#xa;JList namedBookmarksJList = getNamedBookmarksJList( namedBookmarks )&#xd;&#xa;JPanel namedBookmarksJPanel = getNamedBookmarksJPanel(&#xd;&#xa;    namedBookmarks, namedBookmarksJList, (boolean)anonymousBookmarks&#xd;&#xa;)&#xd;&#xa;JList anonymousBookmarksJList = getAnonymousBookmarksJList( anonymousBookmarks )&#xd;&#xa;JPanel anonymousBookmarksJPanel = getAnonymousBookmarksJPanel(&#xd;&#xa;    anonymousBookmarks, anonymousBookmarksJList, (boolean)namedBookmarks&#xd;&#xa;)&#xd;&#xa;gui = createGui(&#xd;&#xa;    namedBookmarksJPanel, namedBookmarksJList,&#xd;&#xa;    anonymousBookmarksJPanel, anonymousBookmarksJList&#xd;&#xa;)&#xd;&#xa;&#xd;&#xa;// Center the gui over the freeplane window&#xd;&#xa;gui.pack()&#xd;&#xa;gui.setLocationRelativeTo( ui.frame )&#xd;&#xa;gui.visible = true&#xd;&#xa;" ID="ID_1574836923" CREATED="1563126470100" MODIFIED="1563126470101"/>
</node>
<node TEXT="_51_CreateLinkToBookmark.groovy" FOLDED="true" ID="ID_1850367663" CREATED="1562412710763" MODIFIED="1562534568332">
<attribute_layout NAME_WIDTH="185.9999944567682 pt" VALUE_WIDTH="238.4999928921463 pt"/>
<attribute NAME="menuTitleKey" VALUE="addons.${name}._51_CreateLinkToBookmark"/>
<attribute NAME="menuLocation" VALUE="/menu_bar/${name}/_50_bookmarksLinks"/>
<attribute NAME="executionMode" VALUE="on_single_node"/>
<attribute NAME="keyboardShortcut" VALUE=""/>
<attribute NAME="execute_scripts_without_asking" VALUE="true"/>
<attribute NAME="execute_scripts_without_file_restriction" VALUE="true"/>
<attribute NAME="execute_scripts_without_write_restriction" VALUE="false"/>
<attribute NAME="execute_scripts_without_exec_restriction" VALUE="false"/>
<attribute NAME="execute_scripts_without_network_restriction" VALUE="false"/>
<node TEXT="// Create a link in this node.&#xd;&#xa;// The target is a bookmark, or the memorized node if it exists.&#xd;&#xa;&#xd;&#xa;import groovy.swing.SwingBuilder&#xd;&#xa;import java.awt.BorderLayout&#xd;&#xa;import java.awt.Color&#xd;&#xa;import java.awt.Component&#xd;&#xa;import java.awt.FlowLayout&#xd;&#xa;import java.awt.GridBagConstraints&#xd;&#xa;import java.awt.Image&#xd;&#xa;import java.awt.KeyboardFocusManager&#xd;&#xa;import java.awt.event.*&#xd;&#xa;import javax.swing.AbstractAction&#xd;&#xa;import javax.swing.ActionMap&#xd;&#xa;import javax.swing.BoxLayout&#xd;&#xa;import javax.swing.ImageIcon&#xd;&#xa;import javax.swing.InputMap&#xd;&#xa;import javax.swing.JComponent&#xd;&#xa;import javax.swing.JFrame&#xd;&#xa;import javax.swing.JList&#xd;&#xa;import javax.swing.JPanel&#xd;&#xa;import javax.swing.KeyStroke&#xd;&#xa;import javax.swing.SwingConstants&#xd;&#xa;import javax.swing.UIManager&#xd;&#xa;import org.freeplane.plugin.script.proxy.Convertible&#xd;&#xa;import org.freeplane.features.link.LinkController&#xd;&#xa;import org.freeplane.features.link.mindmapmode.MLinkController&#xd;&#xa;import bookmarks.Bookmarks as BM&#xd;&#xa;&#xd;&#xa;map = node.map&#xd;&#xa;gui = null&#xd;&#xa;&#xd;&#xa;// Create a link to another node in a node&#xd;&#xa;def createLink( dst, src, message )&#xd;&#xa;{&#xd;&#xa;    dst.link.node = src&#xd;&#xa;    c.setStatusInfo( &apos;standard&apos;, message, &apos;button_ok&apos; )&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;def JList getNamedBookmarksJList( List bookmarks )&#xd;&#xa;{&#xd;&#xa;    if( ! bookmarks ) return null&#xd;&#xa;&#xd;&#xa;    // Create the component&#xd;&#xa;    JList component&#xd;&#xa;    SwingBuilder.build{&#xd;&#xa;        component = list(&#xd;&#xa;            items: bookmarks.collect&#xd;&#xa;            {&#xd;&#xa;                // Display for each bookmark the name of the bookmark,&#xd;&#xa;                // followed by the text of the node&#xd;&#xa;                &quot;&lt;html&gt;&lt;font color=&apos;red&apos;&gt;&lt;b&gt;&lt;i&gt;$it.name&lt;/i&gt;&lt;/b&gt;&lt;/font&gt; : $it.text&lt;/html&gt;&quot;&#xd;&#xa;            },&#xd;&#xa;            visibleRowCount: Integer.min( 20, bookmarks.size() ),&#xd;&#xa;            border: emptyBorder( 5 )&#xd;&#xa;        )&#xd;&#xa;    }&#xd;&#xa;    component.setSelectedIndex( 0 )&#xd;&#xa;    &#xd;&#xa;    // Set the user interactions&#xd;&#xa;    &#xd;&#xa;    component.addKeyListener(&#xd;&#xa;        new KeyAdapter()&#xd;&#xa;        {&#xd;&#xa;            public void keyReleased( KeyEvent e )&#xd;&#xa;            {&#xd;&#xa;                int code = e.getKeyCode()&#xd;&#xa;                char chr = e.getKeyChar()&#xd;&#xa;                int idx = (int) chr&#xd;&#xa;                if( code == KeyEvent.VK_ENTER )&#xd;&#xa;                {&#xd;&#xa;                    int i = component.getSelectedIndex()&#xd;&#xa;                    if( i &gt;= 0 )&#xd;&#xa;                    {&#xd;&#xa;                        def bm = bookmarks[ i ]&#xd;&#xa;                        def target = map.node( bm.id )&#xd;&#xa;                        createLink( node, target, &quot;${BM.gtt( &apos;T_created_link_to_NBM&apos; )} \&quot;$bm.name\&quot;&quot; )&#xd;&#xa;                        gui.dispose()&#xd;&#xa;                    }&#xd;&#xa;                }&#xd;&#xa;                else if( idx &gt; 32 &amp;&amp; idx != 127 &amp;&amp; idx &lt; 256 )&#xd;&#xa;                {&#xd;&#xa;                    // Try to link to the corresponding node id&#xd;&#xa;                    String s = String.valueOf( chr )&#xd;&#xa;                    def bm = bookmarks.find{ it.name == s }&#xd;&#xa;                    if( bm )&#xd;&#xa;                    {&#xd;&#xa;                        def target = map.node( bm.id )&#xd;&#xa;                        createLink( node, target, &quot;${BM.gtt( &apos;T_created_link_to_NBM&apos; )} \&quot;${s}\&quot;&quot; )&#xd;&#xa;                        gui.dispose()&#xd;&#xa;                    }&#xd;&#xa;                    else&#xd;&#xa;                    {&#xd;&#xa;                        c.setStatusInfo( &apos;standard&apos;, &quot;${BM.gtt( &apos;T_no_node_with_key&apos; )} \&quot;${chr}\&quot;&quot;, &apos;messagebox_warning&apos; )&#xd;&#xa;                    }&#xd;&#xa;                }&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    )&#xd;&#xa;    &#xd;&#xa;    component.addMouseListener(&#xd;&#xa;        new MouseAdapter()&#xd;&#xa;        {&#xd;&#xa;            @Override public void mouseClicked(MouseEvent e)&#xd;&#xa;            {&#xd;&#xa;                int idx = component.getSelectedIndex()&#xd;&#xa;                if( idx &gt;= 0 )&#xd;&#xa;                {&#xd;&#xa;                    def bm = bookmarks[ idx ]&#xd;&#xa;                    def target = node.map.node( bm.id )&#xd;&#xa;                    createLink( node, target, &quot;${BM.gtt( &apos;T_created_link_to_NBM&apos; )} \&quot;$bm.name\&quot;&quot; )&#xd;&#xa;                    gui.dispose()&#xd;&#xa;                }&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    )&#xd;&#xa;    &#xd;&#xa;    return component&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;// Create a JPanel for the named bookmarks&#xd;&#xa;def JPanel getNamedBookmarksJPanel(&#xd;&#xa;    List bookmarks,         // List of the bookmarks&#xd;&#xa;    JList bookmarksJList,   // Component that display this list&#xd;&#xa;    boolean showTabTip      // Do we need to add a comment about the Tab key ?&#xd;&#xa;){&#xd;&#xa;    if( ! bookmarks ) return null&#xd;&#xa;    &#xd;&#xa;    // List all the named bookmarks&#xd;&#xa;    JPanel jPane&#xd;&#xa;    SwingBuilder.build{&#xd;&#xa;        jPane = panel(&#xd;&#xa;            border: emptyBorder( [0,0,10,0] )&#xd;&#xa;        )&#xd;&#xa;        {&#xd;&#xa;            gridBagLayout()&#xd;&#xa;            // This gridbag will contains 4 items&#xd;&#xa;            // Row 0 : A label&#xd;&#xa;            // Row 1 : A label and a question mark label with a tooltip&#xd;&#xa;            // Row 2 : A label&#xd;&#xa;            // Row 3 : The list of the named bookmarks&#xd;&#xa;&#xd;&#xa;            // Row 0&#xd;&#xa;            label(&#xd;&#xa;                &quot;${BM.gtt( &apos;T_create_link_to&apos; )}.&quot;,&#xd;&#xa;                constraints: gbc( gridx:0, gridy:0, anchor:GridBagConstraints.LINE_START )&#xd;&#xa;            )&#xd;&#xa;&#xd;&#xa;            // Row 1&#xd;&#xa;            label(&#xd;&#xa;                &quot;${BM.gtt( &apos;T_select_BM_to_link_to&apos; )}.&quot;,&#xd;&#xa;                constraints: gbc( gridx:0, gridy:1, anchor:GridBagConstraints.LINE_START )&#xd;&#xa;            )&#xd;&#xa;            def icon = UIManager.getIcon(&quot;OptionPane.questionIcon&quot;)&#xd;&#xa;            Image img = icon.getImage()&#xd;&#xa;            int w = icon.getIconWidth() / 2&#xd;&#xa;            int h = icon.getIconHeight() / 2&#xd;&#xa;            def newimg = img.getScaledInstance( w, h, Image.SCALE_SMOOTH )&#xd;&#xa;            icon = new ImageIcon( newimg )&#xd;&#xa;            label(&#xd;&#xa;                icon: icon,&#xd;&#xa;                toolTipText:&#xd;&#xa;                    &quot;&quot;&quot;&lt;html&gt;&#xd;&#xa;                        ${BM.gtt( &apos;T_tip_create_link_to_NBM&apos; )}:&#xd;&#xa;                        &lt;ul&gt;&#xd;&#xa;                            &lt;li&gt;${BM.gtt( &apos;T_press_red_key&apos; )}&lt;/li&gt;&#xd;&#xa;                            &lt;li&gt;${BM.gtt( &apos;T_click_BM&apos; )}&lt;/li&gt;&#xd;&#xa;                            &lt;li&gt;${BM.gtt( &apos;T_arrow_select&apos; )}&lt;/li&gt;&#xd;&#xa;                        &lt;/ul&gt;&#xd;&#xa;                    &lt;/html&gt;&quot;&quot;&quot;,&#xd;&#xa;                constraints: gbc( gridx:1, gridy:1, anchor:GridBagConstraints.LINE_START, weightx:1, insets:[0,10,0,0] )&#xd;&#xa;            )&#xd;&#xa;&#xd;&#xa;            // Row 2&#xd;&#xa;            if( showTabTip ) label(&#xd;&#xa;                &quot;&lt;html&gt;${BM.gtt( &apos;T_tab_to_display_SBM&apos; )}.&lt;/html&gt;&quot;,&#xd;&#xa;                constraints: gbc( gridx:0, gridy:2, gridwidth:2, anchor:GridBagConstraints.LINE_START )&#xd;&#xa;            )&#xd;&#xa;&#xd;&#xa;            // Row 3&#xd;&#xa;            scrollPane(&#xd;&#xa;                border: emptyBorder( [10,0,0,0] ),&#xd;&#xa;                constraints: gbc( gridx:0, gridy:3, gridwidth:2, fill:GridBagConstraints.HORIZONTAL, anchor:GridBagConstraints.LINE_START )&#xd;&#xa;            )&#xd;&#xa;            {&#xd;&#xa;                widget( bookmarksJList )&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    }&#xd;&#xa;    &#xd;&#xa;    return jPane&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;def JList getAnonymousBookmarksJList( List bookmarks )&#xd;&#xa;{&#xd;&#xa;    if( ! bookmarks ) return null&#xd;&#xa;&#xd;&#xa;    // Create the component&#xd;&#xa;    JList component&#xd;&#xa;    SwingBuilder.build{&#xd;&#xa;        component = list(&#xd;&#xa;            items: bookmarks.collect{ it.text },&#xd;&#xa;            visibleRowCount: Integer.min( 20, bookmarks.size() )&#xd;&#xa;        )&#xd;&#xa;    }&#xd;&#xa;    component.setSelectedIndex( 0 )&#xd;&#xa;&#xd;&#xa;    // Set the user interactions&#xd;&#xa;    component.addKeyListener(&#xd;&#xa;        new KeyAdapter()&#xd;&#xa;        {&#xd;&#xa;            @Override public void keyReleased(KeyEvent e)&#xd;&#xa;            {&#xd;&#xa;                int code = e.getKeyCode()&#xd;&#xa;                if( code == KeyEvent.VK_ENTER )&#xd;&#xa;                {&#xd;&#xa;                    int idx = component.getSelectedIndex()&#xd;&#xa;                    if( idx &gt;= 0 )&#xd;&#xa;                    {&#xd;&#xa;                        def bm = bookmarks[ idx ]&#xd;&#xa;                        def target = node.map.node( bm.id )&#xd;&#xa;                        createLink( node, target, BM.gtt( &apos;T_created_link_to_SBM&apos; ) )&#xd;&#xa;                        gui.dispose()&#xd;&#xa;                    }&#xd;&#xa;                }&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    )&#xd;&#xa;        &#xd;&#xa;    component.addMouseListener(&#xd;&#xa;        new MouseAdapter()&#xd;&#xa;        {&#xd;&#xa;            @Override public void mouseClicked(MouseEvent e)&#xd;&#xa;            {&#xd;&#xa;                int idx = component.getSelectedIndex()&#xd;&#xa;                if( idx &gt;= 0 )&#xd;&#xa;                {&#xd;&#xa;                    def bm = bookmarks[ idx ]&#xd;&#xa;                    def target = node.map.node( bm.id )&#xd;&#xa;                    createLink( node, target, BM.gtt( &apos;T_created_link_to_SBM&apos; ) )&#xd;&#xa;                    gui.dispose()&#xd;&#xa;                }&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    )&#xd;&#xa;&#xd;&#xa;    return component&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;// Create a JPanel for the anonymous bookmarks&#xd;&#xa;def JPanel getAnonymousBookmarksJPanel(&#xd;&#xa;    List bookmarks,         // List of the bookmarks&#xd;&#xa;    JList bookmarksJList,   // Component that display this list&#xd;&#xa;    boolean showTabTip      // Do we need to add a comment about the Tab key ?&#xd;&#xa;){&#xd;&#xa;    if( ! bookmarks ) return null&#xd;&#xa;    &#xd;&#xa;    // List all the named bookmarks&#xd;&#xa;    JPanel jPane&#xd;&#xa;    SwingBuilder.build{&#xd;&#xa;        jPane = panel(&#xd;&#xa;            border: emptyBorder( [0,0,10,0] )&#xd;&#xa;        )&#xd;&#xa;        {&#xd;&#xa;            gridBagLayout()&#xd;&#xa;            // This gridbag will contains 4 items&#xd;&#xa;            // Row 0 : A label&#xd;&#xa;            // Row 1 : A label and a question mark label with a tooltip&#xd;&#xa;            // Row 2 : A label&#xd;&#xa;            // Row 3 : The list of the named bookmarks&#xd;&#xa;&#xd;&#xa;            // Row 0&#xd;&#xa;            label(&#xd;&#xa;                &quot;${BM.gtt( &apos;T_create_link_in&apos; )}.&quot;,&#xd;&#xa;                constraints: gbc( gridx:0, gridy:0, anchor:GridBagConstraints.LINE_START )&#xd;&#xa;            )&#xd;&#xa;            &#xd;&#xa;            // Row 1&#xd;&#xa;            label(&#xd;&#xa;                &quot;${BM.gtt( &apos;T_select_BM_to_link_to&apos; )}.&quot;,&#xd;&#xa;                constraints: gbc( gridx:0, gridy:1, anchor:GridBagConstraints.LINE_START )&#xd;&#xa;            )&#xd;&#xa;            def icon = UIManager.getIcon(&quot;OptionPane.questionIcon&quot;)&#xd;&#xa;            Image img = icon.getImage()&#xd;&#xa;            int w = icon.getIconWidth() / 2&#xd;&#xa;            int h = icon.getIconHeight() / 2&#xd;&#xa;            def newimg = img.getScaledInstance( w, h, Image.SCALE_SMOOTH )&#xd;&#xa;            icon = new ImageIcon( newimg )&#xd;&#xa;            label(&#xd;&#xa;                icon: icon,&#xd;&#xa;                toolTipText:&#xd;&#xa;                    &quot;&quot;&quot;&lt;html&gt;&#xd;&#xa;                        ${BM.gtt( &apos;T_tip_create_link_to_SBM&apos; )}:&#xd;&#xa;                        &lt;ul&gt;&#xd;&#xa;                            &lt;li&gt;${BM.gtt( &apos;T_click_BM&apos; )}&lt;/li&gt;&#xd;&#xa;                            &lt;li&gt;${BM.gtt( &apos;T_arrow_select&apos; )}&lt;/li&gt;&#xd;&#xa;                        &lt;/ul&gt;&#xd;&#xa;                    &lt;/html&gt;&quot;&quot;&quot;,&#xd;&#xa;                constraints: gbc( gridx:1, gridy:1, anchor:GridBagConstraints.LINE_START, weightx:1, insets:[0,10,0,0] )&#xd;&#xa;            )&#xd;&#xa;            &#xd;&#xa;            // Row 2&#xd;&#xa;            if( showTabTip ) label(&#xd;&#xa;                &quot;&lt;html&gt;${BM.gtt( &apos;T_tab_to_display_NBM&apos; )}.&lt;/html&gt;&quot;,&#xd;&#xa;                constraints: gbc( gridx:0, gridy:2, gridwidth:2, anchor:GridBagConstraints.LINE_START )&#xd;&#xa;            )&#xd;&#xa;            &#xd;&#xa;            // Row 3&#xd;&#xa;            scrollPane(&#xd;&#xa;                border: emptyBorder( [10,0,0,0] ),&#xd;&#xa;                constraints: gbc( gridx:0, gridy:3, gridwidth:2, fill:GridBagConstraints.HORIZONTAL, anchor:GridBagConstraints.LINE_START )&#xd;&#xa;            )&#xd;&#xa;            {&#xd;&#xa;                widget( bookmarksJList )&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    }&#xd;&#xa;&#xd;&#xa;    return jPane&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;// Create the graphical user interface to display&#xd;&#xa;def createGui(&#xd;&#xa;    JPanel namedPanel, JList namedJList,&#xd;&#xa;    JPanel anonymPanel, JList anonymJList&#xd;&#xa;)&#xd;&#xa;{&#xd;&#xa;    def memorizedNodeID = ((MLinkController)(LinkController.getController())).getAnchorID()&#xd;&#xa;&#xd;&#xa;    def gui&#xd;&#xa;    SwingBuilder.build{&#xd;&#xa;        gui = dialog(&#xd;&#xa;            title: BM.gtt( &apos;T_create_link_to_win_title&apos; ),&#xd;&#xa;            modal:true,&#xd;&#xa;            owner: ui.frame,&#xd;&#xa;            defaultCloseOperation: JFrame.DISPOSE_ON_CLOSE&#xd;&#xa;        ){&#xd;&#xa;            borderLayout()&#xd;&#xa;            // A panel for all the compontents (needed to add an inner padding)&#xd;&#xa;            panel(&#xd;&#xa;                border: emptyBorder( 10 ),&#xd;&#xa;                constraints: BorderLayout.PAGE_START&#xd;&#xa;            ){&#xd;&#xa;                borderLayout()&#xd;&#xa;&#xd;&#xa;                // First element of the main panel :&#xd;&#xa;                // A panel which can contains 2 panels:&#xd;&#xa;                // - one for the named bookmarks&#xd;&#xa;                // - one for the anonymous bookmarks&#xd;&#xa;                panel( constraints: BorderLayout.LINE_START )&#xd;&#xa;                {&#xd;&#xa;                    borderLayout()&#xd;&#xa;                    if( namedPanel ) widget( namedPanel, constraints: BorderLayout.PAGE_START )&#xd;&#xa;                    if( anonymPanel ) widget( anonymPanel, constraints: BorderLayout.PAGE_END )&#xd;&#xa;                }&#xd;&#xa;&#xd;&#xa;                // Second element of the main panel :&#xd;&#xa;                vbox( constraints: BorderLayout.PAGE_END)&#xd;&#xa;                {&#xd;&#xa;                    if( memorizedNodeID ) label( text: &quot;&lt;html&gt;${BM.gtt( &apos;T_space_to_link_to_memorized&apos; )}.&lt;/html&gt;&quot; )&#xd;&#xa;                    label( text: &quot;&lt;html&gt;${BM.gtt( &apos;T_press_esc_cancel&apos; )}.&lt;/html&gt;&quot; )&#xd;&#xa;                }&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    }&#xd;&#xa;&#xd;&#xa;    // Set Esc key to close the script&#xd;&#xa;    def onEscPressID = &quot;onEscPress&quot;&#xd;&#xa;    def inputMap = gui.getRootPane().getInputMap( JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT )&#xd;&#xa;    inputMap.put( KeyStroke.getKeyStroke( KeyEvent.VK_ESCAPE, 0 ), onEscPressID )&#xd;&#xa;    gui.getRootPane().getActionMap().put(&#xd;&#xa;        onEscPressID,&#xd;&#xa;        new AbstractAction()&#xd;&#xa;        {&#xd;&#xa;&#x9;        @Override&#xd;&#xa;&#x9;        public void actionPerformed( ActionEvent e )&#xd;&#xa;            {&#xd;&#xa;&#x9;            gui.dispose()&#xd;&#xa;                c.setStatusInfo( &apos;standard&apos;, BM.gtt( &apos;T_link_aborded&apos; ), &apos;messagebox_warning&apos; )&#xd;&#xa;&#x9;        }&#xd;&#xa;        }&#xd;&#xa;    )&#xd;&#xa;&#xd;&#xa;    if( memorizedNodeID )&#xd;&#xa;    { &#xd;&#xa;        // Set Space key to create the link to the standard freeplane memorized node&#xd;&#xa;        def onSpacePressID = &quot;onSpacePress&quot;&#xd;&#xa;        spaceStroke = KeyStroke.getKeyStroke( KeyEvent.VK_SPACE, 0 )&#xd;&#xa;        inputMap.put( spaceStroke, onSpacePressID )&#xd;&#xa;        gui.getRootPane().getActionMap().put(&#xd;&#xa;            onSpacePressID,&#xd;&#xa;            new AbstractAction()&#xd;&#xa;            {&#xd;&#xa;&#x9;            @Override&#xd;&#xa;&#x9;            public void actionPerformed( ActionEvent e )&#xd;&#xa;                {&#xd;&#xa;&#x9;                menuUtils.executeMenuItems( [ &apos;MakeLinkToAnchorAction&apos; ] )&#xd;&#xa;                    gui.dispose()&#xd;&#xa;&#x9;            }&#xd;&#xa;            }&#xd;&#xa;        )&#xd;&#xa;        if( namedJList ) namedJList.getInputMap().put( spaceStroke, &quot;none&quot; )&#xd;&#xa;        if( anonymJList ) anonymJList.getInputMap().put( spaceStroke, &quot;none&quot; )&#xd;&#xa;    }&#xd;&#xa;&#xd;&#xa;    if( namedJList )&#xd;&#xa;    {&#xd;&#xa;        if( anonymPanel ) anonymPanel.visible = false&#xd;&#xa;        namedJList.requestFocus()&#xd;&#xa;    }&#xd;&#xa;    else if( anonymJList )&#xd;&#xa;    {&#xd;&#xa;        if( namedPanel ) namedPanel.visible = false&#xd;&#xa;        anonymJList.requestFocus()&#xd;&#xa;    }&#xd;&#xa;    &#xd;&#xa;    // Set the Tab key to switch between the 2 bookmarks types&#xd;&#xa;    if( namedPanel &amp;&amp; namedJList &amp;&amp; anonymPanel &amp;&amp; anonymJList )&#xd;&#xa;    {&#xd;&#xa;        namedJList.setFocusTraversalKeysEnabled( false )&#xd;&#xa;        anonymJList.setFocusTraversalKeysEnabled( false )&#xd;&#xa;        def onTabPressID = &quot;onTabPress&quot;&#xd;&#xa;        inputMap.put( KeyStroke.getKeyStroke( KeyEvent.VK_TAB, 0 ), onTabPressID )&#xd;&#xa;        gui.getRootPane().getActionMap().put(&#xd;&#xa;            onTabPressID,&#xd;&#xa;            new AbstractAction()&#xd;&#xa;            {&#xd;&#xa;                public void actionPerformed( ActionEvent e )&#xd;&#xa;                {&#xd;&#xa;                    if( namedPanel.visible )&#xd;&#xa;                    {&#xd;&#xa;                        namedPanel.visible = false&#xd;&#xa;                        anonymPanel.visible = true&#xd;&#xa;                        anonymJList.requestFocus()&#xd;&#xa;                    }&#xd;&#xa;                    else&#xd;&#xa;                    {&#xd;&#xa;                        namedPanel.visible = true&#xd;&#xa;                        anonymPanel.visible = false&#xd;&#xa;                        namedJList.requestFocus()&#xd;&#xa;                    }                &#xd;&#xa;                    gui.pack()&#xd;&#xa;                    gui.setLocationRelativeTo( ui.frame )&#xd;&#xa;                }&#xd;&#xa;            }&#xd;&#xa;        )&#xd;&#xa;    }&#xd;&#xa;&#xd;&#xa;    return gui&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;// Find all the bookmarks&#xd;&#xa;def namedBookmarks = BM.getAllNameBookmarkedNodes( map, [ node.id ] )&#xd;&#xa;def anonymousBookmarks = BM.getAllAnonymousBookmarkedNodes( map, [ node.id ] )&#xd;&#xa;&#xd;&#xa;// Quit the script if there is no bookmarks&#xd;&#xa;if( ! namedBookmarks &amp;&amp; ! anonymousBookmarks )&#xd;&#xa;{&#xd;&#xa;    ui.informationMessage( ui.frame, &quot;${BM.gtt( &apos;T_no_bookmarks&apos; )} !&quot;, BM.gtt( &apos;T_BM_win_title&apos; ) )&#xd;&#xa;    return&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;// Create the gui&#xd;&#xa;JList namedBookmarksJList = getNamedBookmarksJList( namedBookmarks )&#xd;&#xa;JPanel namedBookmarksJPanel = getNamedBookmarksJPanel(&#xd;&#xa;    namedBookmarks, namedBookmarksJList, (boolean)anonymousBookmarks&#xd;&#xa;)&#xd;&#xa;JList anonymousBookmarksJList = getAnonymousBookmarksJList( anonymousBookmarks )&#xd;&#xa;JPanel anonymousBookmarksJPanel = getAnonymousBookmarksJPanel(&#xd;&#xa;    anonymousBookmarks, anonymousBookmarksJList, (boolean)namedBookmarks&#xd;&#xa;)&#xd;&#xa;gui = createGui(&#xd;&#xa;    namedBookmarksJPanel, namedBookmarksJList,&#xd;&#xa;    anonymousBookmarksJPanel, anonymousBookmarksJList&#xd;&#xa;)&#xd;&#xa;&#xd;&#xa;// Center the gui over the freeplane window&#xd;&#xa;gui.pack()&#xd;&#xa;gui.setLocationRelativeTo( ui.frame )&#xd;&#xa;gui.visible = true&#xd;&#xa;&#xd;&#xa;" ID="ID_1896240811" CREATED="1563126470102" MODIFIED="1563126470104"/>
</node>
<node TEXT="_90_ConvertFPBookmarks.groovy" FOLDED="true" ID="ID_810584792" CREATED="1562792736732" MODIFIED="1562792790698">
<attribute_layout NAME_WIDTH="182.24999456852692 pt" VALUE_WIDTH="256.49999235570453 pt"/>
<attribute NAME="menuTitleKey" VALUE="addons.${name}._90_ConvertFPBookmarks"/>
<attribute NAME="menuLocation" VALUE="/menu_bar/${name}/_90_bookmarksTools"/>
<attribute NAME="executionMode" VALUE="on_single_node"/>
<attribute NAME="keyboardShortcut" VALUE=""/>
<attribute NAME="execute_scripts_without_asking" VALUE="true"/>
<attribute NAME="execute_scripts_without_file_restriction" VALUE="true"/>
<attribute NAME="execute_scripts_without_write_restriction" VALUE="false"/>
<attribute NAME="execute_scripts_without_exec_restriction" VALUE="false"/>
<attribute NAME="execute_scripts_without_network_restriction" VALUE="false"/>
<node TEXT="// Convert all builtin freeplane icon &quot;Excellent&quot; to standard bookmarks&#xd;&#xa;&#xd;&#xa;import javax.swing.JOptionPane&#xd;&#xa;import bookmarks.Bookmarks as BM&#xd;&#xa;&#xd;&#xa;winTitle = BM.gtt( &apos;T_FP_to_BM_win_title&apos; )&#xd;&#xa;&#xd;&#xa;def messageBox( message, icon )&#xd;&#xa;{&#xd;&#xa;    ui.informationMessage( ui.frame, message, winTitle, icon )&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;// Ask for confirmation&#xd;&#xa;def cancel = ui.showConfirmDialog(&#xd;&#xa;    node.delegate,&#xd;&#xa;    BM.gtt( &apos;T_convert_FP_BM_warning&apos; ),&#xd;&#xa;    winTitle, JOptionPane.WARNING_MESSAGE&#xd;&#xa;)&#xd;&#xa;if( cancel != 0 )&#xd;&#xa;{&#xd;&#xa;    messageBox( BM.gtt( &quot;T_op_canceled&quot; ), JOptionPane.WARNING_MESSAGE )&#xd;&#xa;    return&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;// Convert the icons&#xd;&#xa;def numBookmarksCreated = 0&#xd;&#xa;c.findAll().each&#xd;&#xa;{&#xd;&#xa;    n -&gt;&#xd;&#xa;    if( n.icons.contains( &quot;bookmark&quot; ) )&#xd;&#xa;    {&#xd;&#xa;        numBookmarksCreated ++;&#xd;&#xa;        while( n.icons.remove( &quot;bookmark&quot; ) ){}&#xd;&#xa;        BM.createAnonymousBookmark( n )&#xd;&#xa;    }&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;// Display result&#xd;&#xa;if( numBookmarksCreated &gt; 0 ) messageBox( &quot;${numBookmarksCreated} ${BM.gtt( &apos;T_BMs_created&apos; )} !&quot;, JOptionPane.INFORMATION_MESSAGE )&#xd;&#xa;else messageBox( &quot;${BM.gtt( &apos;T_no_BMs_created&apos; )} !&quot;, JOptionPane.ERROR_MESSAGE )&#xd;&#xa;&#xd;&#xa;&#xd;&#xa;" ID="ID_1340817075" CREATED="1563126470104" MODIFIED="1563126470105"/>
</node>
<node TEXT="_91_ConvertBookmarksToFP.groovy" FOLDED="true" ID="ID_1843539639" CREATED="1562704008478" MODIFIED="1562704073643">
<attribute_layout NAME_WIDTH="186.74999443441646 pt" VALUE_WIDTH="249.7499925568702 pt"/>
<attribute NAME="menuTitleKey" VALUE="addons.${name}._91_ConvertBookmarksToFP"/>
<attribute NAME="menuLocation" VALUE="/menu_bar/${name}/_90_bookmarksTools"/>
<attribute NAME="executionMode" VALUE="on_single_node"/>
<attribute NAME="keyboardShortcut" VALUE=""/>
<attribute NAME="execute_scripts_without_asking" VALUE="true"/>
<attribute NAME="execute_scripts_without_file_restriction" VALUE="true"/>
<attribute NAME="execute_scripts_without_write_restriction" VALUE="false"/>
<attribute NAME="execute_scripts_without_exec_restriction" VALUE="false"/>
<attribute NAME="execute_scripts_without_network_restriction" VALUE="false"/>
<node TEXT="// Convert all bookmarks to buitin freeplane icon &quot;Excellent&quot;&#xd;&#xa;&#xd;&#xa;import javax.swing.JOptionPane&#xd;&#xa;import bookmarks.Bookmarks as BM&#xd;&#xa;&#xd;&#xa;winTitle = BM.gtt( &apos;T_BMs_to_FP_win_title&apos; )&#xd;&#xa;&#xd;&#xa;def messageBox( message, icon )&#xd;&#xa;{&#xd;&#xa;    ui.informationMessage( ui.frame, message, winTitle, icon )&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;// Ask for confirmation&#xd;&#xa;def cancel = ui.showConfirmDialog(&#xd;&#xa;    node.delegate,&#xd;&#xa;    BM.gtt( &apos;T_convert_BM_FP_warning&apos; ),&#xd;&#xa;    winTitle, JOptionPane.WARNING_MESSAGE&#xd;&#xa;)&#xd;&#xa;if( cancel != 0 )&#xd;&#xa;{&#xd;&#xa;    messageBox( BM.gtt( &quot;T_op_canceled&quot; ), JOptionPane.WARNING_MESSAGE )&#xd;&#xa;    return&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;// Clear the records for the named bookmarks&#xd;&#xa;def storageErased = BM.eraseNamedBookmarksStorage( node.map )&#xd;&#xa;&#xd;&#xa;// Convert thie icons&#xd;&#xa;def numIconsConverted = 0&#xd;&#xa;c.findAll().each&#xd;&#xa;{&#xd;&#xa;    n -&gt;&#xd;&#xa;    if( BM.hasAnonymousBookmarkIcon( n ) || BM.hasNamedBookmarkIcon( n ) )&#xd;&#xa;    {&#xd;&#xa;        def iconsNames = n.icons.icons&#xd;&#xa;        n.icons.clear()&#xd;&#xa;        iconsNames.each&#xd;&#xa;        {&#xd;&#xa;            icon -&gt;&#xd;&#xa;            if( icon == BM.anonymousIcon || icon == BM.namedIcon )&#xd;&#xa;            {&#xd;&#xa;                n.icons.add( &quot;bookmark&quot; )&#xd;&#xa;                numIconsConverted ++;&#xd;&#xa;            }&#xd;&#xa;            else&#xd;&#xa;            {&#xd;&#xa;                n.icons.add( icon )&#xd;&#xa;            }&#xd;&#xa;        }&#xd;&#xa;    }&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;// Display result&#xd;&#xa;if( numIconsConverted &gt; 0 ) messageBox( &quot;${numIconsConverted} ${BM.gtt( &apos;T_icons_converted&apos; )} !&quot;, JOptionPane.INFORMATION_MESSAGE )&#xd;&#xa;else if( storageErased ) messageBox( &quot;${BM.gtt( &apos;T_storage_erased&apos; )} !&quot;, JOptionPane.INFORMATION_MESSAGE )&#xd;&#xa;else messageBox( &quot;${BM.gtt( &apos;T_no_conversion_required&apos; )} !&quot;, JOptionPane.ERROR_MESSAGE )&#xd;&#xa;&#xd;&#xa;&#xd;&#xa;" ID="ID_706197914" CREATED="1563126470106" MODIFIED="1563126470106"/>
</node>
<node TEXT="_95_FixOldVersionNamedBookmarks.groovy" FOLDED="true" ID="ID_1665379419" CREATED="1562511659226" MODIFIED="1562531915888">
<attribute_layout NAME_WIDTH="183.74999452382343 pt" VALUE_WIDTH="239.24999286979457 pt"/>
<attribute NAME="menuTitleKey" VALUE="addons.${name}._95_FixOldVersionNamedBookmarks"/>
<attribute NAME="menuLocation" VALUE="/menu_bar/${name}/_90_bookmarksTools"/>
<attribute NAME="executionMode" VALUE="on_single_node"/>
<attribute NAME="keyboardShortcut" VALUE=""/>
<attribute NAME="execute_scripts_without_asking" VALUE="true"/>
<attribute NAME="execute_scripts_without_file_restriction" VALUE="true"/>
<attribute NAME="execute_scripts_without_write_restriction" VALUE="false"/>
<attribute NAME="execute_scripts_without_exec_restriction" VALUE="false"/>
<attribute NAME="execute_scripts_without_network_restriction" VALUE="false"/>
<node TEXT="// Update the named bookmarks defined by a previous version of the addon (v0.5.0)&#xd;&#xa;&#xd;&#xa;// These old bookmarks&#xd;&#xa;// - have an icon named &quot;bookmark-named&quot;&#xd;&#xa;// - are stored within the local map storage at key &quot;MarksKeys&quot;&#xd;&#xa;&#xd;&#xa;// If an bookmark with the same name as an actual named bookmark is found in&#xd;&#xa;// the old bookmarks, the actual one is converted to standard bookmark&#xd;&#xa;&#xd;&#xa;import org.freeplane.plugin.script.proxy.Convertible&#xd;&#xa;import groovy.json.JsonBuilder&#xd;&#xa;import groovy.json.JsonSlurper&#xd;&#xa;import javax.swing.JOptionPane&#xd;&#xa;import bookmarks.Bookmarks as BM&#xd;&#xa;&#xd;&#xa;oldStorageKey = &quot;MarksKeys&quot;&#xd;&#xa;oldNamedIcon = &quot;bookmark-named&quot;&#xd;&#xa;&#xd;&#xa;def numFixedBookmarks = 0&#xd;&#xa;def numAnonymizedBookmarks = 0&#xd;&#xa;&#xd;&#xa;winTitle = BM.gtt( &apos;T_convert_v050_NMBs_win_title&apos; )&#xd;&#xa;&#xd;&#xa;def messageBox( message, icon )&#xd;&#xa;{&#xd;&#xa;    ui.informationMessage( ui.frame, message, winTitle, icon )&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;def Map loadOldNamedBookmarks()&#xd;&#xa;{&#xd;&#xa;    // Load the named bookmarks stored in the &quot;MarksKeys&quot; entry in map local storage&#xd;&#xa;    def marksString = new Convertible( &apos;{}&apos; )&#xd;&#xa;    def stored = node.map.storage.getAt( oldStorageKey )&#xd;&#xa;    if( stored ) marksString = stored;&#xd;&#xa;    def namedBookmarks = new JsonSlurper().parseText( marksString.getText() ) as Map&#xd;&#xa;&#xd;&#xa;    // Discard nodes that do not exist anymore, and nodes that haven&apos;t got the&#xd;&#xa;    // old bookmark icon&#xd;&#xa;    namedBookmarks.removeAll&#xd;&#xa;    {&#xd;&#xa;        key, id -&gt;&#xd;&#xa;        def n = map.node( id )&#xd;&#xa;        return ( n == null || ! n.icons.contains( oldNamedIcon ) ) &#xd;&#xa;    }&#xd;&#xa;&#xd;&#xa;    namedBookmarks = namedBookmarks.sort()&#xd;&#xa;    &#xd;&#xa;    return namedBookmarks&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;def deleteOldNamedBookmarksDatas()&#xd;&#xa;{&#xd;&#xa;    // Delete the bookmarks stored in the &quot;MarksKeys&quot; entry in map local storage&#xd;&#xa;    node.map.storage.putAt( oldStorageKey, null )&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;def mergeNamedBookmarks( oldBookmarks, uptodateBookmarks )&#xd;&#xa;{&#xd;&#xa;    // Merge the old bookmarks in the already up to date bookmarks&#xd;&#xa;&#xd;&#xa;    conflicts = [:]&#xd;&#xa;    oldBookmarks.each&#xd;&#xa;    {&#xd;&#xa;        key, id -&gt;&#xd;&#xa;        if( uptodateBookmarks.containsKey( key ) &amp;&amp; uptodateBookmarks[ key ] != id ) conflicts[ key ] = uptodateBookmarks[ key ]&#xd;&#xa;        uptodateBookmarks[ key ] = id;&#xd;&#xa;    }&#xd;&#xa;    uptodateBookmarks = uptodateBookmarks.sort()&#xd;&#xa;    return [ uptodateBookmarks, conflicts ]&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;def cancel = ui.showConfirmDialog(&#xd;&#xa;    node.delegate,&#xd;&#xa;    BM.gtt( &apos;T_convert_v050_NBMs_warning&apos; ),&#xd;&#xa;    winTitle, JOptionPane.WARNING_MESSAGE&#xd;&#xa;)&#xd;&#xa;if( cancel != 0 )&#xd;&#xa;{&#xd;&#xa;    messageBox( BM.gtt( &quot;T_op_canceled&quot; ), JOptionPane.WARNING_MESSAGE )&#xd;&#xa;    return&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;// Suspend the monitoring to be able to manipulate bookmarks&#xd;&#xa;BM.pauseMonitor( node.map )&#xd;&#xa;&#xd;&#xa;// Get the actual version bookmarks&#xd;&#xa;def namedBookmarks = BM.loadNamedBookmarks( node.map )&#xd;&#xa;&#xd;&#xa;// Look for named bookmarks in the local map storage, to find them as defined&#xd;&#xa;// by previous version of the addon&#xd;&#xa;def oldNamedBookmarks = loadOldNamedBookmarks()&#xd;&#xa;numFixedBookmarks = oldNamedBookmarks.size()&#xd;&#xa;&#xd;&#xa;// Move old bookmarks to new bookmarks&#xd;&#xa;if( numFixedBookmarks )&#xd;&#xa;{&#xd;&#xa;    // Delete them from the local storage&#xd;&#xa;    deleteOldNamedBookmarksDatas()&#xd;&#xa;&#xd;&#xa;    // Merge the two&#xd;&#xa;    ( namedBookmarks, conflicts ) = mergeNamedBookmarks( oldNamedBookmarks, namedBookmarks )&#xd;&#xa;&#xd;&#xa;    // Save them with the new settings&#xd;&#xa;    BM.saveNamedBookmarks( namedBookmarks, node.map )&#xd;&#xa;    &#xd;&#xa;    // If an actual bookmark as the same key than an old one,&#xd;&#xa;    // convert this bookmark to anonymous bookmark&#xd;&#xa;    conflicts.each&#xd;&#xa;    {&#xd;&#xa;        key, id -&gt;&#xd;&#xa;        def n = map.node( id )&#xd;&#xa;        if( n )&#xd;&#xa;        {&#xd;&#xa;            n.icons.remove( BM.namedIcon )&#xd;&#xa;            BM.createAnonymousBookmark( n )&#xd;&#xa;            numAnonymizedBookmarks++;&#xd;&#xa;        }&#xd;&#xa;    }&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;// Now replace the icons&#xd;&#xa;c.findAll().each&#xd;&#xa;{&#xd;&#xa;    n -&gt;&#xd;&#xa;    def update = false&#xd;&#xa;    while( n.icons.remove( oldNamedIcon ) ) update = true&#xd;&#xa;    if( update )&#xd;&#xa;    {&#xd;&#xa;        if( BM.hasBookmarkName( n, namedBookmarks ) )&#xd;&#xa;        {&#xd;&#xa;            n.icons.add( BM.namedIcon )&#xd;&#xa;            numFixedBookmarks++;&#xd;&#xa;        }&#xd;&#xa;    }&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;BM.resumeMonitor( node.map )&#xd;&#xa;&#xd;&#xa;// display result&#xd;&#xa;def message = &apos;&apos;&#xd;&#xa;def icon = JOptionPane.INFORMATION_MESSAGE&#xd;&#xa;if( numFixedBookmarks )&#xd;&#xa;{&#xd;&#xa;    message = &quot;${numFixedBookmarks} ${BM.gtt( &apos;T_v050_NBMs_converted&apos;)}&quot;&#xd;&#xa;    if( numAnonymizedBookmarks ) message += &quot;\n${BM.gtt( &apos;T_and&apos; )} ${numAnonymizedBookmarks} ${BM.gtt( &apos;T_NBMs_anonymized&apos;)}.&quot;&#xd;&#xa;    else message += &quot;.&quot;&#xd;&#xa;}&#xd;&#xa;else&#xd;&#xa;{&#xd;&#xa;    message = &quot;${BM.gtt( &apos;T_no_v050_NBMs_converted&apos; ) } !&quot;&#xd;&#xa;    icon = JOptionPane.ERROR_MESSAGE&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;messageBox( message, icon )&#xd;&#xa;&#xd;&#xa;&#xd;&#xa;" ID="ID_1167754214" CREATED="1563126470107" MODIFIED="1563126470108"/>
</node>
</node>
<node TEXT="lib" POSITION="right" ID="ID_1159449610" CREATED="1562410359919" MODIFIED="1563126431681">
<edge COLOR="#353535"/>
<richcontent TYPE="NOTE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      An add-on may contain any number of nodes containing binary files (normally .jar files) to be added to the add-on's classpath.
    </p>
    <p>
      
    </p>
    <p>
      &#160;- The immediate child nodes contain the name of the file, e.g. 'mysql-connector-java-5.1.25.jar'). Put the file into a 'lib' subdirectory of the add-on base directory.
    </p>
    <p>
      
    </p>
    <p>
      &#160;- The child nodes of these nodes contain the actual files.
    </p>
    <p>
      
    </p>
    <p>
      &#160;- Any lib file will be extracted in &lt;installationbase&gt;/&lt;addonname&gt;/lib.
    </p>
    <p>
      
    </p>
    <p>
      &#160;- The files will be processed in the sequence as seen in the map.
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT="zips" POSITION="right" ID="ID_435012533" CREATED="1562410359928" MODIFIED="1563126431692">
<edge COLOR="#353535"/>
<richcontent TYPE="NOTE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      An add-on may contain any number of nodes containing zip files.
    </p>
    <p>
      
    </p>
    <p>
      &#160;- The immediate child nodes contain a description of the zip. The devtools script releaseAddOn.groovy allows automatic zip creation if the name of this node matches a directory in the current directory.
    </p>
    <p>
      
    </p>
    <p>
      &#160;- The child nodes of these nodes contain the actual zip files.
    </p>
    <p>
      
    </p>
    <p>
      &#160;- Any zip file will be extracted in the &lt;installationbase&gt;. Currently, &lt;installationbase&gt; is always Freeplane's &lt;userhome&gt;, e.g. ~/.freeplane/1.3.
    </p>
    <p>
      
    </p>
    <p>
      &#160;- The files will be processed in the sequence as seen in the map.
    </p>
  </body>
</html>
</richcontent>
<node TEXT="icons" FOLDED="true" ID="ID_1144883898" CREATED="1562410359939" MODIFIED="1562410359940">
<node TEXT="UEsDBBQACAgIAGVs7U4AAAAAAAAAAAAAAAAQAAAAaWNvbnMvYm9va21hcmtzLwMAUEsHCAAAAA&#xa;ACAAAAAAAAAFBLAwQUAAgICABlbO1OAAAAAAAAAAAAAAAAHgAAAGljb25zL2Jvb2ttYXJrcy9C&#xa;b29rbWFyayAxLnN2Z52UTW/bOBCGzy7Q/8Ayly0gUvwSRblxi9pW0gDeNkCbFD0Fjs3IQlnJK8&#xa;l2ur9+h5S6TVL3sHshPTPU8w45Mz59c//Nob1t2rKuJphThpGtVvW6rIoJ3nV3xOA3r58/O31B&#xa;CDq3lW2WXd2M0dt1fWvRhXO7tgsuxBPKKIvQx+tzlN9v66ZDl25XkIsK0eC87kXGSFPG0HRXuj&#xa;ViLxEiJPDnH2afvlzmqN0X6PJquriYIUzi+LOcxfH80zwgOOVxnL/HCG+6bjuO48PhQA+S1k0R&#xa;nzfL7aZctTEcjP1B+CgGGOd03a2x1/DoB1flGJXrCZ4t3V87ewMWPEXVTo6wBWPMs4Yj43tXVl&#xa;+PHeRZlsUhCkcnmG3vMfre78+fjdChXHcbkGYJlVL54MaWxaYDVyqp1ql37Ut7mNb+a8TQcBQN&#xa;cV+c5a2z5Ha5+lo09a6CC1T2gI6d9YqQ77jdLld2greNbW2zt+Eptstug2oIlJ3Pj0qMgPQnZ1&#xa;BDYyKeCo9wRBnKlCJaUZkkC/UjcC2Nl1oxInjEEyJ1JDWsG6FWQkQMLHDDGmhSXw/f/Y1jr17A&#xa;MupzuCudm+CTfKZ5dtYn0WtGWUIzZRYeJKjwmnoGhhf+d/OyUVAFh2DcK8MNuIig7KnRwfIZwC&#xa;aSPeeaCiVAfLR4pNLnNTqFytllA620Lm3VhfaAdrqY3/AbjIrBfVWVHbTJDl7zo3/aD9VVa6He&#xa;fIIDVCZQdDBSmjFpICAeBsDQKRVSpL4Qo9Fp29VbhOq7u9ZCI8D8td13B/XyfrKqHYzbSZ7m82&#xa;n6KriGqo0ZTbI+7V8YVKbKHAcl+XSqnoKkNr9FpUwlR1Hzs9y8nT5F8VSp4yh+nKJzmc2eUIZq&#xa;xI/L8bNpHjYuJNf30K5xf5z8qNbL/99KPvX/1E7HW+lhdyvJp2Lep6RZxMWKK+BlwBcK+GmUgZ&#xa;wOBuD9Jsw+M/Ca3BGhqRKGyIQqRzKquSZcUGP4YEW9tfBpSkXhP8hfAe4I48nD4AJeq4QIBWhY&#xa;32mGfB7sHbwDjCn8isIm9d4TpJTu0eAPVtRb/vWyMN/Gj7oHLfwyDHdchBX+LmH/B1BLBwiUEH&#xa;33LQMAAGAGAABQSwMEFAAICAgAZWztTgAAAAAAAAAAAAAAAB4AAABpY29ucy9ib29rbWFya3Mv&#xa;Qm9va21hcmsgMi5zdmedlNtu3DYQhq8dIO/A0jcxIFI8iaK2VoPsIY6BTWMgtoteGbKWqxUiSx&#xa;tJe0ifvkNqndjuBkWrC1KcIb+ZIX/y/O3+oUJb23ZlU6eYU4aRrfNmUdZFijf9khj89rfXr85/&#xa;IQRd2Nq2Wd+0I/Ru0dxbdFlVm673JsQjyigL0OfbCzTbr5u2R1fVpiCXNaLeeDsEGSFNGUPjTV&#xa;ktEDtDiBDPn36aXP95NUPdtkBXN+P55QRhEoZ/yEkYTq+nHsEpD8PZ7xjhVd+vR2G42+3oTtKm&#xa;LcKLNluvyrwLYWLoJsKiEGCc00W/wC6GQz8plWNULlI8yaqvG3sHI9iKukuPsAVjzLEOU0b7qq&#xa;y/HJvIkyQJvRemppit9xh9G/rXr07Qrlz0KwjNIiqlcs6VLYtVD6ZYUq1jZ9qWdjdu3GrE0GEq&#xa;Ovjd4WT3lSX3Wf6laJtNDQXUdoeOzXURId9Rt85ym+J1azvbbq3finXWr1ADjrJ3+VH5UzJ8GM&#xa;H/R87gfI0JeCwcviLKUKYU0YrKKJqrR8etNC6NnBHBAx4RqQOpoV0JBRnlQgQMDOCB1gOlvj0s&#xa;/QuHLrkCmpMhxWVZVSk+ZWwSJ++HPIawQRLRRCVzBxJUuLB6AgMX+3vnIgcucA4GwbiLDEVwGY&#xa;AqYqP9yGUAnYi2nGsqlIDgJ/NnUYa8TpzjHA7XZi2obVHauvcKAsVdTu/4HUbFwXxTlz0oaQMb&#xa;/tnt/qf6prMgCZ5iqJQpmYAuYEA0hIy0MeATT33C+eKImsSoH9jrNqu7ZdM+pPgh69ty/4b7ky&#xa;ccEaEQ0czANuozd8SQatc3a4Sa5bKzIDG42V3/rQIlODvJmwou8uksnk3H8a/edNDDiNEoGSr+&#xa;B4PKWJnjoGg2HquXIKnNT1ExU9FR1PT9zLwbv0TxWKnjKH6comcymbygDIDz8Pkp/tDbkysRQ3&#xa;KD/DZt9eb08ZDP/v2m/B+FurL+k0qPKvTFpYkSJYaUNAu4yLkCXgJ8oYAfBwmE034AeNcJ84g1&#xa;gBUVSSgoFJZSE5s5FwGXisIjB6X4hBnh/vYDSasINAgUaD9ohlxI9gFKhosOf4HvpN46gpSyev&#xa;Z6HEbBMHIblfgXwrjHwoHmrjk8D2HhW3iPof8bUEsHCFlhTaNPAwAAwQYAAFBLAQIUABQACAgI&#xa;AGVs7U4AAAAAAgAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAABpY29ucy9ib29rbWFya3MvUEsBAh&#xa;QAFAAICAgAZWztTpQQffctAwAAYAYAAB4AAAAAAAAAAAAAAAAAQAAAAGljb25zL2Jvb2ttYXJr&#xa;cy9Cb29rbWFyayAxLnN2Z1BLAQIUABQACAgIAGVs7U5ZYU2jTwMAAMEGAAAeAAAAAAAAAAAAAA&#xa;AAALkDAABpY29ucy9ib29rbWFya3MvQm9va21hcmsgMi5zdmdQSwUGAAAAAAMAAwDWAAAAVAcA&#xa;AAAA" ID="ID_1749841945" CREATED="1563126470125" MODIFIED="1563126470169"/>
</node>
<node TEXT="scripts" FOLDED="true" ID="ID_87188883" CREATED="1562410359941" MODIFIED="1562410359942">
<node TEXT="UEsDBBQACAgIAFFy7U4AAAAAAAAAAAAAAAANAAAAc2NyaXB0cy9pbml0LwMAUEsHCAAAAAACAA&#xa;AAAAAAAFBLAwQUAAgICABRcu1OAAAAAAAAAAAAAAAAKQAAAHNjcmlwdHMvaW5pdC9Cb29rbWFy&#xa;a3NNb25pdG9ySWNvbnMuZ3Jvb3Z5zVlZbxs3EH6WAf8Hxg/JCpHppo9tFcB2HdRtbRd20j4URU&#xa;DtUhLjFaksuXLUwP+9M7z20K4sN3XQAJH3mBnOzW+4YrFUhSGqmNFpwfkyZ5LTKWemLLimC7ak&#xa;55cq46dzJmf8V6ENl7zY3xMPslVcZysuzS4s5xds+e8WuoD/+YPEQERPlTSFyvOHZYtUSTplqV&#xa;HFmp7DzQ1c8TfuwU7MkWkn6gshM+ToIV7m5UxIqtNCLA1dFurTGo1Z8cKISd63RBfXjb15Z0Su&#xa;I9cHtmIUOGb0xhRCzk5KkWc1H9n3JbDQM1kueMGMqGlavYUIxqezQqnVmn7QYNzP8HOTl8USZe&#xa;7vpTnTmjRjTYAt5wvIFU06cm5EutLj8/7ewGlMJFtw60AyJgcTpW4XrLjVRyf+inx7UNEyqeR6&#xa;oUq9hf5VjV5DFNmM/8LXSBxINNzrGtUsVxOWt4lqBAslBUjyFP4OrDpAnwyW5SQXKVkpkREZ7c&#xa;+SViURjr9DYEDjB0dH5I85l2ASwTQiQhOWZTyDRCAFX6gVXE5VsSDMCh2RO04WpTbEsFvuBaSs&#xa;4IRNVAlP55xEZ1iJmnznyQ7JcXznFrOCJpyUUnwsORHSr9LLANrhClNRAKN9oqabPDaUh03OFA&#xa;yElTSHFJf5Gm3yjORuLtI5iPYSCNg95QWXKZhuFHKxlkieNZc8N6gZiJwI8J1ELue7TlWqpeOK&#xa;QYVHLI28V5MPPDUE6hIKw2BW2ODS8ABpYn9zxgaSSggocOyDP2ca1sRsCCkAfNzwDOnElCRRGL&#xa;28+vHs/fnp1SXlH0uW6ySsORx+dnI7BdfkgcDEK6Py7HeWQwYMbU4OQsLDc19hTTqKPnGUKCSS&#xa;jWtV/Pw5+PMCawQkHadGrHgyjAugcr8VVqrjaSWac34sgEItWmQ+DnpUyWMysykGPZkImxHM1N&#xa;J1qbRwbW8QFBcaHfoT05coO5R84iIFypJlad7Z2kCTjvUbFISXiS/GytyhE3tv/9xviYANbcv/&#xa;kt9V/t/fI61/oUPyu0Y0ApePRpsLxUeWx0XmfAp+A/+hC7vC482ztCfe452EvUEglNInDQSqBm&#xa;vYpDBz0KFfP1dr2JQg67qzzMvkuQ5J2bu4zwNiaVsxaO5bj4xDwWdlzoqeSOzixSC5XnydUn35&#xa;AQZJrWu2e2Ww6ZGmocPauiFdMCV6ArIETIWqbaveweMTwofkc48yj1NjZBPL7Zu7qtTtlPtW43&#xa;A/9xuQQkkM7rnU0OQBVZBqX1nC9i/NqPYknQP8G8F+bmz2yYx/IpuIw+UFppcX2gQXdVghANQ1&#xa;90EvCZ01glxJWalt1/X7PCOpWq4tOpAK3Fe4xdp7KfViTkoPC5TkjtLL2dh874SZg3QNJZNzcs&#xa;vXE8WKDC9GVQsEiVpFYzwUiBnXhgO4ueBL1JjW+y/W1LPOGgWZAP1lRYp2xHnBynVXY9IePShu&#xa;2u9v3l5dnyFTGBucLuOKlc64CS+TzRaT8SmB8Qk4avOARRXJEOcqpGnMAr7axpgRpPEmGQaBiJ&#xa;MtDQ5mHjSjHscmqWPooYMjSaAfbpHtaVCKe4HucyYsy2LGTwom0/kbiMEJyy6DlTqJOWwTzMkf&#xa;xsKAAF/bCBBTIHCd1rK5BuFY2L86kOOyECtmbN3nHNF3T/Ns4bdYRrsHAMlunPdwbjj4Ym835G&#xa;3693tkcAlaI6XgSMMEuvbFwQvy0ppDobG8tPcN3x5nWRxIurdvxNB2a/LeBKYz6Xup0LGHxgYZ&#xa;vG1bWX+jbDp7FJAPisOwNL3vppuxNwRvrKeg6QlfSJpq8TcW7CF5he8A5ucc9knymnwTtsOuAt&#xa;ToTqQbRqBmZ3xMJdzHK33c4vUNMDIdHvpmHuLX0Ag1QABQrQYadS0QOs1/02HeKoxtb5tpOHpg&#xa;bQN4VL2z7CNU9X+ZLs1YPm2ybEuVRhzdzVNmSlghpEpX5DaCdu12xRC3uAu22qONQF3rr1ai46&#xa;9Zo7v5xaE+yG0LcOyZjpvFHuOwhjGjuP+gVHdAtIMHA5PTAQt6ygDcfqlzH5vTHkv3+ndQ6Yf7&#xa;dAVx65638gMhJHrNEU5+5wGaBxutd0mlUA0PV4clEU+UeT6yOo0qzZzO1hjUoRKd+TndWdWVLX&#xa;3TjD1qyvOYQIi1XcubWNzjhLjTJ0TbgJVb+KVj5mo1x20g6oHc6wKIMftqwCigO/xLBY4TV9Me&#xa;GGFTK0T1WWT2oWx6zG0YoaLwiXNzYs/vpjB/ze3TleB3Ljibk6YzxKLAGJ1B7ZD7h+iC1w5Sgm&#xa;tDOYV7B4B9cYSHdM4A+EMq+kPtajTfAbciv+SfjGdOhptAtsojnB9CTE+i09tDh6MLE9w1Z5n1&#xa;TcYMZEnsUohIPXashpOHoWqdchssrY7Ih/VByR1VSOW1gXGP+83IV1d9ogryx7YK47bVokSEgO&#xa;N66r6RoHELPJYA3wBGn1+0tV6xQvueUPtYAfbBdKz5W4hFfRSx9zjHgbZWVGNhP1r4A37c3VZ4&#xa;zlbReI1xzT9rXwX+QqMqM2xw7c/REf7Hk6auTyPuvQ/SafzABdZUNzQtC5zyMZNrTxsM+3uNWy&#xa;o3VtLQ2GR2DF7HPBIGXXGK33KSClA0Oaj91ONPGO8pZ9CokLe5kivLTcsSgR867tuKLdofgp5W&#xa;r43vTj1qQXg6TLAp1XpmR9gN5s11enn/AVBLBwg7IK6G0gcAALcdAABQSwECFAAUAAgICABRcu&#xa;1OAAAAAAIAAAAAAAAADQAAAAAAAAAAAAAAAAAAAAAAc2NyaXB0cy9pbml0L1BLAQIUABQACAgI&#xa;AFFy7U47IK6G0gcAALcdAAApAAAAAAAAAAAAAAAAAD0AAABzY3JpcHRzL2luaXQvQm9va21hcm&#xa;tzTW9uaXRvckljb25zLmdyb292eVBLBQYAAAAAAgACAJIAAABmCAAAAAA=" ID="ID_613551505" CREATED="1563126470170" MODIFIED="1563126470174"/>
</node>
<node TEXT="lib" FOLDED="true" ID="ID_540678797" CREATED="1563126431698" MODIFIED="1563126431707">
<node TEXT="UEsDBBQACAgIAMud7k4AAAAAAAAAAAAAAAAOAAAAbGliL2Jvb2ttYXJrcy8DAFBLBwgAAAAAAg&#xa;AAAAAAAABQSwMEFAAICAgAk5juTgAAAAAAAAAAAAAAAB4AAABsaWIvYm9va21hcmtzL0Jvb2tt&#xa;YXJrcy5ncm9vdnnVWktv5DYSvg8w/4HjQ6xGejRJ9rDAJA7geJPAk8cG49m9GD7QErtbsZoUSH&#xa;aPDcf/fav4kEiKUtz2AMn60N0SWcV6fFWsIt3R6oauGbkW4mZL5Y16+eLli2bbCanJ73RPy51u&#xa;2vIX2hGqyDv47kfXUoj9Xfm7Erx8Bx/f7Zq2ZnJy/KLdyS4YF3JdriRjXUs5K7t2t254qSrZdL&#xa;rspLi9Ky/Mw39AAHUA1ZngeyZ1c92yCSraNV6jH34LVRpP+1XUU1wqIZm1zgd266V8+aJqqVLk&#xa;u8Gc9wRfE/hbNZy2RGmqm4pcaNnwNTwJCfb/id2RE3LUk8GzOpqmolzwu63YqfNKcCTs3ffGsy&#xa;BfztBzumX1DO1XR3Myr1txTdtU5JnltoI3oKejcE9g+H4VN30vmppopnSxsO/v7Rf+BWAoq2JR&#xa;Ignoz1cCeB5/ACLy6thOf/Bs37wha61h/EemyQdJuWqpZjVBh0ULe8W0LvzvGxB2LIVkeic56T&#xa;1erpnGh4Ic07oWXJW9Nctj8nnI5cF+9ZKdSQbCEJqE2ccNk4y87ae9JnrDkI8iFAbcw7WgsnZv&#xa;lWrWHLTSApj55eGZA3a/TvjsabtjAycwt1iZX4BmyVQneI3KJ1zKnsuHTaMSgeEFaFKTlRRbw6&#xa;oPEbKFYQdwXJKWkdExm5BW0PpXRGOPo8IGpSEeOwBkeI+r4UI11RDC/brBasP8mq3MS9DkBGeU&#xa;bgY67hTcFsTfYqCK1nMJBddQflG0NY8NMdA0q8KvufCI4ewjCbIgALijUjGLHTu5x9ICyPps65&#xa;myFhZ3zC7fXo2RfoFMjCFi//DIuqThBznJhKSie5Y66d2Y93LWc+iJa7tHgCu8PdyuUQTGd5OK&#xa;VPJgSujIbpc4cuk5lFrYYEaLjg32vaTKGsw5y6w37IQD6t9bs2u5Ywh3JbZMbzBOqg3laxZbDA&#xa;RuGYCDIfvYahdWxnmEe8SiPw6ArAcdkr0C++7aNhy+DzD9CAum5EHuQysMAw8xQoMFs8QrGk16&#xa;yKfG92wr9gyhmkCAglToMExK8INqAjn3WBN22yi97OkprwmkYzs1cippcNOD6GW02oBQK0i2vH&#xa;JpznLcNrB/NzqTq1bNbezPcw7cFCwNPO6eGBIWQpidYspSGiOctu2kTW/QUxCer7/N2rowTkbF&#xa;Cpy1ICdjWDzEAPLCLLIhn6rmlBpYJBqgjQ8WHm3CHfAH2eM5KOqrocYqN1RFsmJlA+ISTKS8RJ&#xa;erEvBQBCRDBZS3xmjLj3UbZ5MoR6wGlG5wt4CHvmSLsZhNHUBz6qfHOmE9avlO1iZmw7Y6w4em&#xa;DQfXxQVjJhlOid+osBj42OgNbnyzygC3glZ6B8F6B4F0bPVXYD8MsBntFlljNOPZrP4LLOEdmU&#xa;koU07MgPKpYo/w+hiRadcxKv2Wn+TSra8uxnL7SSh/IPIyl+Fm9Iizgdflv1iCFk7L+rlYTNwx&#xa;gaDIERF6DtRpItMYf5LPPhsbz66RZ3+4zsUQeEImqk9Fz6dQeyIGnd5//JEz8WM1931QNqusQE&#xa;2NPUfQhoSVaWWIR8LNx5ndPh6THeYqqIDe7C3ZxOKUHXvbFDhP07lmLTtY54+bpu2jzght64uM&#xa;yvcTVVnfsCYZMCevaRVtyvEd5pAxoY4jCsrnNm5lMxWXdW8ErQjEQHW2ofJsCtHLPg6wnjkz1Q&#xa;3UFibKMkcM7kgGZtifpWmX/w1wCRaKSx5Q9HyFNgQVZbhRoD0iOy2JdGWtjqE4kSehDoeaPMFg&#xa;vlYyhh8KppjhJTC5ylVQHBMWN82CjWMLrMTafCqGRxBx5viX4WJcbsry/rxp6KyiMwtz+rCTUI&#xa;drI8hkOdkXxPcEjLmHyhE+Tk76neQh8cupWcSfmJBOMqUOW9Karl9hatq4dldC9mdYkUwXAEOb&#xa;3KH/ndqQvYMCzD6uIPc4GEH01DVDQ7FitEgyWFRjHFwAO79j55t3+zi8s4Cb36MOi+iZ8ErLkJ&#xa;kww9zXYiHlTpmSfWAapdjimBRisGp+TOH1UHx8Eox4RmnkuO1pjJjpXSTAjt1BDsZPv720gB7c&#xa;NMJmX820HsFBzffY1QOothjZZt+BNGz4mU0H1b6EfnJJNLvVENrmsDU8awW3NCqovuplMGiIwm&#xa;F8sSSdgERzDb0OgJBXeMA8CHRuCNwMZg4ebqt2B7R4iGS5uANMJ2m8C/6MsuO5T9tmKjAMlfC8&#xa;dGnnuyXOa5OZgo4/PY0LEtjlVXy6JoXQ5arhNaxcLOZbeT5q4hGZUzVjHGoZdp5BoAZsVMNT2B&#xa;W50HUYG/NBNY3bwBCl7o/906VwpGwZX+tNsSDfkn98ATwdHX5dflGWX/3zinxOjsqyPBozGUz5&#xa;zTcAsaOmPnprpFuSI2QATxZyMelDFIP+pwuY62fGyvR55qPDBDk8MVhM6eeG+9IP9+FCmdpq8b&#xa;cJLMyYny6mtjcKKU+yNxtJ3h0m/9nRopuZOXNLImWmYXE8RjuUOYTLx5eJrjFIxyobG530S1Si&#xa;bVmlJzPG7OEfum7+/C+MatyKxoH97KD2Ny3jULex3YM9GkLQw2DaPRQV9A4Lcs41WzNpb37gob&#xa;DXg2SRYxVkjXj0KnLHOGs4b3ydb+J+ozt36QEl32thT5vcua/yF7VYu60gw+wkG7efHXL4xU78&#xa;85uMPeiK28vbq/h99oZjmJKUI0+98EtuToaL60W0wPNu+JyKT77hixsEpkMv7LHqFKRuFDX/z+&#xa;Bn4pqX4b06tinJ5Uq+8TDSNtwYrxWVuavPmPCwmzrDNBhIbpZ6uz/2au49U7vt82AqDYtH4/Tv&#xa;g0d7OpXcHz8PrkEg/vUoje8P/x9BCh//A1BLBwhzEq6pSwgAADclAABQSwECFAAUAAgICADLne&#xa;5OAAAAAAIAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAbGliL2Jvb2ttYXJrcy9QSwECFAAUAAgI&#xa;CACTmO5OcxKuqUsIAAA3JQAAHgAAAAAAAAAAAAAAAAA+AAAAbGliL2Jvb2ttYXJrcy9Cb29rbW&#xa;Fya3MuZ3Jvb3Z5UEsFBgAAAAACAAIAiAAAANUIAAAAAA==" ID="ID_132372470" CREATED="1563126470174" MODIFIED="1563126470178"/>
</node>
</node>
<node TEXT="images" POSITION="right" ID="ID_63266556" CREATED="1562410359950" MODIFIED="1563126431733" TEXT_SHORTENED="true">
<edge COLOR="#353535"/>
<richcontent TYPE="NOTE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      An add-on may define any number of images as child nodes of the images node. The actual image data has to be placed as base64 encoded binary data into the text of a subnode.
    </p>
    <p>
      The images are saved to the <i>${installationbase}/resources/images</i>&#160;directory.
    </p>
    <p>
      
    </p>
    <p>
      The following images should be present:
    </p>
    <ul>
      <li>
        <i>${name}-icon.png</i>, like <i>oldicons-theme-icon.png</i>. This will be used in the app-on overview.
      </li>
      <li>
        <i>${name}-screenshot-1.png</i>, like <i>oldicons-theme-screenshot-1.png</i>. This will be used in the app-on details dialog. Further images can be included but they are not used yet.
      </li>
    </ul>
    <p>
      Images can be added automatically by releaseAddOn.groovy or must be uploaded into the map via the script <i>Tools-&gt;Scripts-&gt;Insert Binary</i>&#160;since they have to be (base64) encoded as simple strings.
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</map>
